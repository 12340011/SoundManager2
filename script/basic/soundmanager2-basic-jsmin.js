/** @license

 SoundManager 2: Javascript Sound for the Web
 Basic (HTML5/Flash 8-only, API subset) build
 ---------------------------------------------
 http://schillmania.com/projects/soundmanager2

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20101010
*/
(function(T){function ra(Ka,La){function sa(){if(b.debugURLParam.test(D))b.debugMode=true;if(s(b.debugID))return false;var c,a,e,g;if(b.debugMode&&!s(b.debugID)&&(!ca||!b.useConsole||b.useConsole&&ca&&!b.consoleOnly)){c=k.createElement("div");c.id=b.debugID+"-toggle";a={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};c.appendChild(k.createTextNode("-"));
c.onclick=ta;c.title="Toggle SM2 debug console";if(t.match(/msie 6/i)){c.style.position="absolute";c.style.cursor="hand"}for(g in a)if(a.hasOwnProperty(g))c.style[g]=a[g];a=k.createElement("div");a.id=b.debugID;a.style.display=b.debugMode?"block":"none";if(b.debugMode&&!s(c.id)){try{e=U();e.appendChild(c)}catch(f){throw Error(p("appXHTML"));}e.appendChild(a)}}}this.debugMode=true;this.debugFlash=false;this.useConsole=true;this.waitForWindowLoad=this.consoleOnly=false;this.nullURL="about:blank";this.allowPolling=
true;this.useFastPolling=false;this.bgColor="#ffffff";this.useHighPerformance=false;this.flashLoadTimeout=1E3;this.wmode=null;this.allowScriptAccess="always";this.useHTML5Audio=this.useFlashBlock=false;this.html5Test=/^probably$/i;this.ondebuglog=false;this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],
required:false},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,loops:1,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfinish:null,position:null,type:null,volume:100};this.version=null;this.versionNumber="V2.97a.20101010";this.movieURL=null;this.url=Ka||null;this.altURL=null;this.enabled=
this.swfLoaded=false;this.o=null;this.movieID="sm2-container";this.id=La||"sm2movie";this.swfCSS={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.didFlashBlock=this.specialWmodeCase=false;this.filePattern=/\.mp3(\?.*)?$/i;
this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.hasHTML5=null;this.html5={usingFlash:null};this.ignoreFlash=false;this.flashVersion=8;var da,b=this,s,t=navigator.userAgent,D=T.location.href.toString(),
ua=this.flashVersion,k=document,o=T,va,V,E=[],ea=true,u,F=false,M=false,q=false,v=false,fa=false,n,Ma=0,N,y,wa,G,H,ga,W,xa,ya,C,za,X,O,I,ha,U,Y,ia,ja,Aa,Na=["log","info","warn","error"],Ba,Z,Ca,P=null,ka=null,p,la,J,ta,$,ma,r,aa=false,na=false,Da,Ea,K=null,Fa,ba,z=false,Q,A,oa,Ga,B,w,pa=Array.prototype.slice,Ha=t.match(/pre\//i),Oa=t.match(/(ipad|iphone)/i);t.match(/mobile/i);var x=t.match(/MSIE/i),R=t.match(/safari/i)&&!t.match(/chrome/i),ca=typeof console!=="undefined"&&typeof console.log!=="undefined",
qa=typeof k.hasFocus!=="undefined"?k.hasFocus():null,L=typeof k.hasFocus==="undefined"&&R,Ia=!L;this._use_maybe=D.match(/sm2\-useHTML5Maybe\=1/i);this._overHTTP=k.location?k.location.protocol.match(/http/i):null;this.useAltURL=!this._overHTTP;if(Oa||Ha){b.useHTML5Audio=true;b.ignoreFlash=true}if(Ha||this._use_maybe)b.html5Test=/^(probably|maybe)$/i;(function(){var c=D,a=null;if(c.indexOf("#sm2-usehtml5audio=")!==-1){a=c.substr(c.indexOf("#sm2-usehtml5audio=")+19)==="1";if(typeof console!=="undefined"&&
typeof console.log!=="undefined")console.log((a?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter");b.useHTML5Audio=a}})();this.supported=function(){return K?q&&!v:b.useHTML5Audio&&b.hasHTML5};this.getMovie=function(c){return x?o[c]:R?s(c)||k[c]:s(c)};this.createSound=function(c){function a(){e=$(e);b.sounds[f.id]=new da(f);b.soundIDs.push(f.id);return b.sounds[f.id]}var e=null,g=null,f=null;if(!q||!b.supported()){ma("soundManager.createSound(): "+p(!q?"notReady":"notOK"));return false}if(arguments.length===
2)c={id:arguments[0],url:arguments[1]};f=e=y(c);f.id.toString().charAt(0).match(/^[0-9]$/)&&b._wD("soundManager.createSound(): "+p("badID",f.id),2);b._wD("soundManager.createSound(): "+f.id+" ("+f.url+")",1);if(r(f.id,true)){b._wD("soundManager.createSound(): "+f.id+" exists",1);return b.sounds[f.id]}if(ba(f)){g=a();b._wD("Loading sound "+f.id+" from HTML5");g._setup_html5(f)}else{g=a();b.o._createSound(f.id,0,f.loops||1,false)}if(f.autoLoad||f.autoPlay)if(g)if(b.isHTML5){g.autobuffer="auto";g.preload=
"auto"}else g.load(f);f.autoPlay&&g.play();return g};this.destroySound=function(c,a){if(!r(c))return false;var e=b.sounds[c],g;e._iO={};e.stop();e.unload();for(g=0;g<b.soundIDs.length;g++)if(b.soundIDs[g]===c){b.soundIDs.splice(g,1);break}a||e.destruct(true);delete b.sounds[c];return true};this.load=function(c,a){if(!r(c))return false;return b.sounds[c].load(a)};this.unload=function(c){if(!r(c))return false;return b.sounds[c].unload()};this.start=this.play=function(c,a){if(!q||!b.supported()){ma("soundManager.play(): "+
p(!q?"notReady":"notOK"));return false}if(!r(c)){a instanceof Object||(a={url:a});if(a&&a.url){b._wD('soundManager.play(): attempting to create "'+c+'"',1);a.id=c;return b.createSound(a).play()}else return false}return b.sounds[c].play(a)};this.setPosition=function(c,a){if(!r(c))return false;return b.sounds[c].setPosition(a)};this.stop=function(c){if(!r(c))return false;b._wD("soundManager.stop("+c+")",1);return b.sounds[c].stop()};this.stopAll=function(){b._wD("soundManager.stopAll()",1);for(var c in b.sounds)b.sounds[c]instanceof
da&&b.sounds[c].stop()};this.pause=function(c){if(!r(c))return false;return b.sounds[c].pause()};this.pauseAll=function(){for(var c=b.soundIDs.length;c--;)b.sounds[b.soundIDs[c]].pause()};this.resume=function(c){if(!r(c))return false;return b.sounds[c].resume()};this.resumeAll=function(){for(var c=b.soundIDs.length;c--;)b.sounds[b.soundIDs[c]].resume()};this.togglePause=function(c){if(!r(c))return false;return b.sounds[c].togglePause()};this.setVolume=function(c,a){if(!r(c))return false;return b.sounds[c].setVolume(a)};
this.mute=function(c){var a=0;if(typeof c!=="string")c=null;if(c){if(!r(c))return false;b._wD('soundManager.mute(): Muting "'+c+'"');return b.sounds[c].mute()}else{b._wD("soundManager.mute(): Muting all sounds");for(a=b.soundIDs.length;a--;)b.sounds[b.soundIDs[a]].mute();b.muted=true}return true};this.muteAll=function(){b.mute()};this.unmute=function(c){if(typeof c!=="string")c=null;if(c){if(!r(c))return false;b._wD('soundManager.unmute(): Unmuting "'+c+'"');return b.sounds[c].unmute()}else{b._wD("soundManager.unmute(): Unmuting all sounds");
for(c=b.soundIDs.length;c--;)b.sounds[b.soundIDs[c]].unmute();b.muted=false}return true};this.unmuteAll=function(){b.unmute()};this.toggleMute=function(c){if(!r(c))return false;return b.sounds[c].toggleMute()};this.disable=function(c){if(typeof c==="undefined")c=false;if(v)return false;v=true;n("shutdown",1);for(var a=b.soundIDs.length;a--;)Ba(b.sounds[b.soundIDs[a]]);N(c);w(o,"load",H);return true};this.canPlayMIME=function(c){var a;if(b.hasHTML5)a=Q({type:c});return!K||a?a:c?c.match(b.mimePattern)?
true:false:null};this.canPlayURL=function(c){var a;if(b.hasHTML5)a=Q(c);return!K||a?a:c?c.match(b.filePattern)?true:false:null};this.canPlayLink=function(c){if(typeof c.type!=="undefined"&&c.type)if(b.canPlayMIME(c.type))return true;return b.canPlayURL(c.href)};this.getSoundById=function(c,a){if(!c)throw Error("SoundManager.getSoundById(): sID is null/undefined");var e=b.sounds[c];!e&&!a&&b._wD('"'+c+'" is an invalid sound ID.',2);return e};this.onready=function(c,a){if(c&&c instanceof Function){q&&
n("queue");a||(a=o);wa(c,a);G();return true}else throw p("needFunction");};this.getMoviePercent=function(){return b.o&&typeof b.o.PercentLoaded!=="undefined"?b.o.PercentLoaded():null};this._wD=this._writeDebug=function(c,a,e){b.ondebuglog&&b.ondebuglog(c,a,e);var g,f;if(!b.debugMode)return false;if(typeof e!=="undefined"&&e)c=c+" | "+(new Date).getTime();if(ca&&b.useConsole){e=Na[a];typeof console[e]!=="undefined"?console[e](c):console.log(c);if(b.useConsoleOnly)return true}try{g=s("soundmanager-debug");
if(!g)return false;f=k.createElement("div");if(++Ma%2===0)f.className="sm2-alt";a=typeof a==="undefined"?0:parseInt(a,10);f.appendChild(k.createTextNode(c));if(a){if(a>=2)f.style.fontWeight="bold";if(a===3)f.style.color="#ff3333"}g.insertBefore(f,g.firstChild)}catch(j){}return true};this._debug=function(){n("currentObj",1);for(var c=0,a=b.soundIDs.length;c<a;c++)b.sounds[b.soundIDs[c]]._debug()};this.reboot=function(){b._wD("soundManager.reboot()");b.soundIDs.length&&b._wD("Destroying "+b.soundIDs.length+
" SMSound objects...");for(var c=b.soundIDs.length;c--;)b.sounds[b.soundIDs[c]].destruct();try{if(x)ka=b.o.innerHTML;P=b.o.parentNode.removeChild(b.o);b._wD("Flash movie removed.")}catch(a){n("badRemove",2)}ka=P=null;b.enabled=q=aa=na=F=M=v=b.swfLoaded=false;b.soundIDs=b.sounds=[];b.o=null;for(c=E.length;c--;)E[c].fired=false;b._wD("soundManager: Rebooting...");o.setTimeout(function(){b.beginDelayedInit()},20)};this.destruct=function(){b._wD("soundManager.destruct()");b.disable(true)};this.beginDelayedInit=
function(){fa=true;I();setTimeout(za,20);W()};da=function(c){var a=this,e,g,f,j,l,i;this.sID=c.id;this.url=c.url;this._iO=this.instanceOptions=this.options=y(c);this.volume=this.options.volume;this._lastURL=null;this.isHTML5=false;this._debug=function(){if(b.debugMode){var d=null,h=[],m,S;for(d in a.options)if(a.options[d]!==null)if(a.options[d]instanceof Function){m=a.options[d].toString();m=m.replace(/\s\s+/g," ");S=m.indexOf("{");h.push(" "+d+": {"+m.substr(S+1,Math.min(Math.max(m.indexOf("\n")-
1,64),64)).replace(/\n/g,"")+"... }")}else h.push(" "+d+": "+a.options[d]);b._wD("SMSound() merged options: {\n"+h.join(", \n")+"\n}")}};this._debug();this.load=function(d){var h=null;if(typeof d!=="undefined"){a._iO=y(d);a.instanceOptions=a._iO}else{d=a.options;a._iO=d;a.instanceOptions=a._iO;if(a._lastURL&&a._lastURL!==a.url){n("manURL");a._iO.url=a.url;a.url=null}}b._wD("soundManager.load(): "+a._iO.url,1);if(a._iO.url===a.url&&a.readyState!==0&&a.readyState!==2){n("onURL",1);return a}a._lastURL=
a.url;a.loaded=false;a.readyState=1;a.playState=0;if(ba(a._iO)){b._wD("HTML 5 load: "+a._iO.url);h=a._setup_html5(a._iO);h.load();a._iO.autoPlay&&a.play()}else try{a.isHTML5=false;a._iO=$(a._iO);b.o._load(a.sID,a._iO.url,a._iO.stream,a._iO.autoPlay,a._iO.whileloading?1:0,a._iO.loops||1,false)}catch(m){n("smError",2);u("onload",false);ia()}return a};this.unload=function(){if(a.readyState!==0){b._wD('SMSound.unload(): "'+a.sID+'"');if(a.isHTML5){f();if(i){i.pause();i.src=b.nullURL;i.load();i=a._audio=
null}}else b.o._unload(a.sID,b.nullURL);e()}return a};this.destruct=function(d){b._wD('SMSound.destruct(): "'+a.sID+'"');if(a.isHTML5){f();if(i){i.pause();i.src="about:blank";i.load();i=a._audio=null}}else b.o._destroySound(a.sID);d||b.destroySound(a.sID,true)};this.start=this.play=function(d,h){var m;h=typeof h==="undefined"?true:h;d||(d={});a._iO=y(d,a._iO);a._iO=y(a._iO,a.options);a.instanceOptions=a._iO;if(ba(a._iO)){a._setup_html5(a._iO);j()}if(a.playState===1&&!a.paused)if(m=a._iO.multiShot){b._wD('SMSound.play(): "'+
a.sID+'" already playing (multi-shot)',1);a.isHTML5&&a.setPosition(a._iO.position)}else{b._wD('SMSound.play(): "'+a.sID+'" already playing (one-shot)',1);return a}if(a.loaded)b._wD('SMSound.play(): "'+a.sID+'"');else if(a.readyState===0){b._wD('SMSound.play(): Attempting to load "'+a.sID+'"',1);if(a.isHTML5){a.load(a._iO);a.readyState=1}else{a._iO.autoPlay=true;a.load(a._iO)}}else if(a.readyState===2){b._wD('SMSound.play(): Could not load "'+a.sID+'" - exiting',2);return a}else b._wD('SMSound.play(): "'+
a.sID+'" is loading - attempting to play..',1);if(a.paused&&a.position&&a.position>0){b._wD('SMSound.play(): "'+a.sID+'" is resuming from paused state',1);a.resume()}else{b._wD('SMSound.play(): "'+a.sID+'" is starting to play');a.playState=1;a.paused=false;if(!a.instanceCount||a._iO.multiShotEvents)a.instanceCount++;a.position=typeof a._iO.position!=="undefined"&&!isNaN(a._iO.position)?a._iO.position:0;a._iO=$(a._iO);a._iO.onplay&&h&&a._iO.onplay.apply(a);a.setVolume(a._iO.volume,true);if(a.isHTML5){j();
a._setup_html5().play()}else b.o._start(a.sID,a._iO.loops||1,a.position/1E3)}return a};this.stop=function(d){if(a.playState===1){a._onbufferchange(0);a.resetOnPosition(0);if(!a.isHTML5)a.playState=0;a.paused=false;a._iO.onstop&&a._iO.onstop.apply(a);if(a.isHTML5){if(i){a.setPosition(0);i.pause();a.playState=0;a._onTimer();f();a.unload()}}else b.o._stop(a.sID,d);a.instanceCount=0;a._iO={}}return a};this.setPosition=function(d){if(d===undefined)d=0;d=a.isHTML5?Math.max(d,0):Math.min(a.duration||a._iO.duration,
Math.max(d,0));a.position=d;a.resetOnPosition(a.position);a._iO.position=d;if(a.isHTML5){if(i){b._wD("setPosition(): setting position to "+a.position/1E3);if(a.playState)try{i.currentTime=a.position/1E3}catch(h){b._wD("setPosition("+a.position+"): WARN: Caught exception: "+h.message,2)}else b._wD("HTML 5 warning: cannot set position while playState == 0 (not playing)",2);a.paused&&a._onTimer(true)}}else{d=a.position/1E3;b.o._setPosition(a.sID,d,a.paused||!a.playState)}return a};this.pause=function(d){if(a.paused||
a.playState===0&&a.readyState!==1)return a;b._wD("SMSound.pause()");a.paused=true;if(a.isHTML5){a._setup_html5().pause();f()}else if(d||d===undefined)b.o._pause(a.sID);a._iO.onpause&&a._iO.onpause.apply(a);return a};this.resume=function(){if(!a.paused)return a;b._wD("SMSound.resume()");a.paused=false;a.playState=1;if(a.isHTML5){a._setup_html5().play();j()}else b.o._pause(a.sID);a._iO.onresume&&a._iO.onresume.apply(a);return a};this.togglePause=function(){b._wD("SMSound.togglePause()");if(a.playState===
0){a.play({position:a.position/1E3});return a}a.paused?a.resume():a.pause();return a};this.setVolume=function(d,h){if(typeof d==="undefined")d=100;if(typeof h==="undefined")h=false;if(a.isHTML5){if(i)i.volume=d/100}else b.o._setVolume(a.sID,b.muted&&!a.muted||a.muted?0:d);a._iO.volume=d;if(!h)a.volume=d;return a};this.mute=function(){a.muted=true;if(a.isHTML5){if(i)i.muted=true}else b.o._setVolume(a.sID,0);return a};this.unmute=function(){a.muted=false;var d=typeof a._iO.volume!=="undefined";if(a.isHTML5){if(i)i.muted=
false}else b.o._setVolume(a.sID,d?a._iO.volume:a.options.volume);return a};this.toggleMute=function(){return a.muted?a.unmute():a.mute()};this.onposition=function(d,h,m){a._onPositionItems.push({position:d,method:h,scope:typeof m!=="undefined"?m:a,fired:false});return a};this.processOnPosition=function(){var d,h;d=a._onPositionItems.length;if(!d||!a.playState||a._onPositionFired>=d)return false;for(d=d;d--;){h=a._onPositionItems[d];if(!h.fired&&a.position>=h.position){h.method.apply(h.scope,[h.position]);
h.fired=true;b._onPositionFired++}}return true};this.resetOnPosition=function(d){var h,m;h=a._onPositionItems.length;if(!h)return false;for(h=h;h--;){m=a._onPositionItems[h];if(m.fired&&d<=m.position){m.fired=false;b._onPositionFired--}}return true};this._onTimer=function(d){var h={};if(a._hasTimer||d)if(i&&(d||(a.playState>0||a.readyState===1)&&!a.paused)){a.duration=l();a.durationEstimate=a.duration;d=i.currentTime?i.currentTime*1E3:0;a._whileplaying(d,h,h,h,h);return true}else{b._wD('_onTimer: Warn for "'+
a.sID+'": '+(!i?"Could not find element. ":"")+(a.playState===0?"playState bad, 0?":"playState = "+a.playState+", OK"));return false}};l=function(){var d=i?i.duration*1E3:undefined;return d&&!isNaN(d)?d:null};j=function(){a.isHTML5&&Da(a)};f=function(){a.isHTML5&&Ea(a)};e=function(){a._onPositionItems=[];a._onPositionFired=0;a._hasTimer=null;a._added_events=null;i=a._audio=null;a.bytesLoaded=null;a.bytesTotal=null;a.position=null;a.duration=a._iO&&a._iO.duration?a._iO.duration:null;a.durationEstimate=
null;a.loaded=false;a.playState=0;a.paused=false;a.readyState=0;a.muted=false;a.isBuffering=false;a.instanceOptions={};a.instanceCount=0};e();this._setup_html5=function(d){d=y(a._iO,d);if(i){if(a.url!==d.url){b._wD("setting new URL on existing object: "+d.url);i.src=d.url}}else{b._wD("creating HTML 5 audio element with URL: "+d.url);a._audio=new Audio(d.url);i=a._audio;a.isHTML5=true;g()}i.loop=d.loops>1?"loop":"";return a._audio};g=function(){function d(h,m,S){return i?i.addEventListener(h,m,S||
false):null}if(a._added_events)return false;a._added_events=true;d("load",function(){b._wD("HTML5::load: "+a.sID);if(i){a._onbufferchange(0);a._whileloading(a.bytesTotal,a.bytesTotal,l());a._onload(true)}},false);d("canplay",function(){b._wD("HTML5::canplay: "+a.sID);a._onbufferchange(0)},false);d("waiting",function(){b._wD("HTML5::waiting: "+a.sID);a._onbufferchange(1)},false);d("progress",function(h){b._wD("HTML5::progress: "+a.sID+": loaded/total: "+(h.loaded||0)+"/"+(h.total||1));if(!a.loaded&&
i){a._onbufferchange(0);a._whileloading(h.loaded||0,h.total||1,l())}},false);d("error",function(){if(i){b._wD("HTML5::error: "+i.error.code);a._onload(false)}},false);d("loadstart",function(){b._wD("HTML5::loadstart: "+a.sID);a._onbufferchange(1)},false);d("play",function(){b._wD("HTML5::play: "+a.sID);a._onbufferchange(0)},false);d("playing",function(){b._wD("HTML5::playing: "+a.sID);a._onbufferchange(0)},false);d("timeupdate",function(){a._onTimer()},false);setTimeout(function(){a&&i&&d("ended",
function(){b._wD("HTML5::ended: "+a.sID);a._onfinish()},false)},250);return true};this._whileloading=function(d,h,m){a.bytesLoaded=d;a.bytesTotal=h;a.duration=Math.floor(m);a.durationEstimate=a._iO.duration?a.duration>a._iO.duration?a.duration:a._iO.duration:parseInt(a.bytesTotal/a.bytesLoaded*a.duration,10);if(a.durationEstimate===undefined)a.durationEstimate=a.duration;a.readyState!==3&&a._iO.whileloading&&a._iO.whileloading.apply(a)};this._whileplaying=function(d){if(isNaN(d)||d===null)return false;
if(a.playState===0&&d>0)d=0;a.position=d;a.processOnPosition();if(a.playState===1){!a.isHTML5&&!a.position&&a.isBuffering&&a._onbufferchange(0);a._iO.whileplaying&&a._iO.whileplaying.apply(a)}return true};this._onload=function(d){d=d?true:false;b._wD('SMSound._onload(): "'+a.sID+'"'+(d?" loaded.":" failed to load? - "+a.url),d?1:2);if(!d&&!a.isHTML5){b.sandbox.noRemote===true&&b._wD("SMSound._onload(): "+p("noNet"),1);b.sandbox.noLocal===true&&b._wD("SMSound._onload(): "+p("noLocal"),1)}a.loaded=
d;a.readyState=d?3:2;a._onbufferchange(0);a._iO.onload&&a._iO.onload.apply(a,[d]);return true};this._onfinish=function(){a._onbufferchange(0);a.resetOnPosition(0);if(a.instanceCount){a.instanceCount--;if(!a.instanceCount){a.playState=0;a.paused=false;a.instanceCount=0;a.instanceOptions={};f()}if(!a.instanceCount||a._iO.multiShotEvents)if(a._iO.onfinish){b._wD('SMSound._onfinish(): "'+a.sID+'"');a._iO.onfinish.apply(a)}}};this._onbufferchange=function(d){if(a.playState===0)return false;if(d&&a.isBuffering||
!d&&!a.isBuffering)return false;a.isBuffering=d===1;if(a._iO.onbufferchange){b._wD("SMSound._onbufferchange(): "+d);a._iO.onbufferchange.apply(a)}return true}};U=function(){return k.body?k.body:k._docElement?k.documentElement:k.getElementsByTagName("div")[0]};s=function(c){return k.getElementById(c)};y=function(c,a){var e={},g,f;for(g in c)if(c.hasOwnProperty(g))e[g]=c[g];g=typeof a==="undefined"?b.defaultOptions:a;for(f in g)if(g.hasOwnProperty(f)&&typeof e[f]==="undefined")e[f]=g[f];return e};(function(){function c(f){f=
pa.call(f);var j=f.length;if(e){f[1]="on"+f[1];j>3&&f.pop()}else j===3&&f.push(false);return f}function a(f,j){var l=f.shift()[g[j]];e?l(f[0],f[1]):l.apply(this,f)}var e=o.attachEvent,g={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};B=function(){a(c(arguments),"add")};w=function(){a(c(arguments),"remove")}})();ba=function(c){return(c.type?Q({type:c.type}):false)||Q(c.url)};Q=function(c){if(!b.useHTML5Audio||!b.hasHTML5)return false;var a,e=b.audioFormats;if(!A){A=
[];for(a in e)if(e.hasOwnProperty(a)){A.push(a);if(e[a].related)A=A.concat(e[a].related)}A=RegExp("\\.("+A.join("|")+")","i")}a=typeof c.type!=="undefined"?c.type:null;c=typeof c==="string"?c.toLowerCase().match(A):null;if(!c||!c.length){if(!a)return false}else c=c[0].substr(1);if(c&&typeof b.html5[c]!=="undefined")return b.html5[c];else{if(!a)if(c&&b.html5[c])return b.html5[c];else a="audio/"+c;a=b.html5.canPlayType(a);return b.html5[c]=a}};Ga=function(){function c(l){var i,d,h=false;if(!a||typeof a.canPlayType!==
"function")return false;if(l instanceof Array){i=0;for(d=l.length;i<d&&!h;i++)if(b.html5[l[i]]||a.canPlayType(l[i]).match(b.html5Test)){h=true;b.html5[l[i]]=true}return h}else return(l=a&&typeof a.canPlayType==="function"?a.canPlayType(l):false)&&(l.match(b.html5Test)?true:false)}if(!b.useHTML5Audio||typeof Audio==="undefined")return false;var a=typeof Audio!=="undefined"?new Audio:null,e,g={},f,j;f=b.audioFormats;for(e in f)if(f.hasOwnProperty(e)){g[e]=c(f[e].type);if(f[e]&&f[e].related)for(j=0;j<
f[e].related.length;j++)b.html5[f[e].related[j]]=g[e]}g.canPlayType=a?c:null;b.html5=y(b.html5,g);return true};X={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",appXHTML:"soundManager::createMovie(): appendChild/innerHTML set failed. May be app/xhtml+xml DOM-related.",spcWmode:"soundManager::createMovie(): Removing wmode, preventing win32 below-the-fold SWF loading issue",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",
checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+k.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for focus-related event..",waitImpatient:"soundManager: Getting impatient, still waiting for Flash%s...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",
needFunction:"soundManager.onready(): Function object expected",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- soundManager._debug(): Current sound objects ---",waitEI:"soundManager::initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager::initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",
init:"-- soundManager::init() --",didInit:"soundManager::init(): Already called?",flashJS:"soundManager: Attempting to call Flash from JS..",noPolling:"soundManager: Polling (whileloading()/whileplaying() support) is disabled.",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",
shutdown:"soundManager.disable(): Shutting down",queue:"soundManager.onready(): Queueing handler",smFail:"soundManager: Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+b.swfCSS.swfTimedout+" CSS..",fbLoaded:"Flash loaded",fbHandler:"soundManager::flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",
needfl9:'Note: Flash 9 required for MP4 formats, not in "basic" version; use full soundmanager2.js.',mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning"};s=function(c){return k.getElementById(c)};p=function(){var c=pa.call(arguments),a=c.shift();a=X&&X[a]?X[a]:"";var e,g;if(a&&c&&c.length){e=0;for(g=c.length;e<g;e++)a=a.replace("%s",c[e])}return a};$=function(c){if(c.loops>1&&c.stream){n("as2loop");c.stream=
false}return c};ma=function(c){typeof console!=="undefined"&&typeof console.warn!=="undefined"?console.warn(c):b._wD(c)};va=function(){return false};Ba=function(c){for(var a in c)if(c.hasOwnProperty(a)&&typeof c[a]==="function")c[a]=va};Z=function(c){if(typeof c==="undefined")c=false;if(v||c){n("smFail",2);b.disable(c)}};Ca=function(c){var a=null;if(c)if(c.match(/\.swf(\?\.*)?$/i)){if(a=c.substr(c.toLowerCase().lastIndexOf(".swf?")+4))return c}else if(c.lastIndexOf("/")!==c.length-1)c+="/";return(c&&
c.lastIndexOf("/")!==-1?c.substr(0,c.lastIndexOf("/")+1):"./")+b.movieURL};ya=function(){var c=b.debugMode||b.debugFlash?"_debug.swf":".swf";b.useHTML5Audio&&b.audioFormats.mp4.required&&b._wD(p("needfl9"));ua=b.flashVersion;b.version=b.versionNumber+(z?" (HTML5-only mode)":" (AS2/Flash 8)");b.movieURL="soundmanager2.swf".replace(".swf",c)};Aa=function(c,a){if(!b.o||!b.allowPolling)return false;b.o._setPolling(c,a)};(function(){function c(f){f=pa.call(f);var j=f.length;if(e){f[1]="on"+f[1];j>3&&f.pop()}else j===
3&&f.push(false);return f}function a(f,j){var l=f.shift()[g[j]];e?l(f[0],f[1]):l.apply(this,f)}var e=o.attachEvent,g={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};B=function(){a(c(arguments),"add")};w=function(){a(c(arguments),"remove")}})();ja=function(){function c(){e.left=o.scrollX+"px";e.top=o.scrollY+"px"}function a(g){b._wD("mobileFlash::flash on-screen hack: "+(g?"ON":"OFF"));g=o[(g?"add":"remove")+"EventListener"];g("resize",c,false);g("scroll",c,false)}
var e=null;return{check:function(g){e=b.oMC.style;if(t.match(/android/i)){if(g){if(b.flashLoadTimeout){b._wDS("mfTimeout");b.flashLoadTimeout=0}return false}b._wD("mfOn");e.position="absolute";e.left=e.top="0px";a(true);b.onready(function(){a(false);if(e)e.left=e.top="-9999px"});c()}return true}}}();Y=function(c,a){function e(){b._wD("-- SoundManager 2 Basic "+b.version+(!z&&b.useHTML5Audio?b.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(b.useHighPerformance?", high performance mode, ":
", ")+((b.useFastPolling?"fast":"normal")+" polling")+(b.wmode?", wmode: "+b.wmode:"")+(b.debugFlash?", flash debug mode":"")+(b.useFlashBlock?", flashBlock mode":"")+" --",1)}var g=a?a:b.url,f=b.altURL?b.altURL:g,j;j=U();var l,i,d=J(),h,m=null;m=(m=k.getElementsByTagName("html")[0])&&m.dir&&m.dir.match(/rtl/i);c=typeof c==="undefined"?b.id:c;if(F&&M)return false;ya();if(z){e();b.oMC=s(b.movieID);V();M=F=true;return false}F=true;b.url=Ca(this._overHTTP?g:f);a=b.url;b.wmode=!b.wmode&&b.useHighPerformance?
"transparent":b.wmode;if(b.wmode!==null&&!x&&!b.useHighPerformance&&navigator.platform.match(/win32/i)){b.specialWmodeCase=true;n("spcWmode");b.wmode=null}j={name:c,id:c,src:a,width:"100%",height:"100%",quality:"high",allowScriptAccess:b.allowScriptAccess,bgcolor:b.bgColor,pluginspage:"http://www.macromedia.com/go/getflashplayer",type:"application/x-shockwave-flash",wmode:b.wmode};if(b.debugFlash)j.FlashVars="debug=1";b.wmode||delete j.wmode;if(x){g=k.createElement("div");i='<object id="'+c+'" data="'+
a+'" type="'+j.type+'" width="'+j.width+'" height="'+j.height+'"><param name="movie" value="'+a+'" /><param name="AllowScriptAccess" value="'+b.allowScriptAccess+'" /><param name="quality" value="'+j.quality+'" />'+(b.wmode?'<param name="wmode" value="'+b.wmode+'" /> ':"")+'<param name="bgcolor" value="'+b.bgColor+'" />'+(b.debugFlash?'<param name="FlashVars" value="'+j.FlashVars+'" />':"")+"<!-- --\></object>"}else{g=k.createElement("embed");for(l in j)j.hasOwnProperty(l)&&g.setAttribute(l,j[l])}sa();
d=J();if(j=U()){b.oMC=s(b.movieID)?s(b.movieID):k.createElement("div");if(b.oMC.id){h=b.oMC.className;b.oMC.className=(h?h+" ":b.swfCSS.swfDefault)+(d?" "+d:"");b.oMC.appendChild(g);if(x){l=b.oMC.appendChild(k.createElement("div"));l.className=b.swfCSS.swfBox;l.innerHTML=i}M=true;ja.check(true)}else{b.oMC.id=b.movieID;b.oMC.className=b.swfCSS.swfDefault+" "+d;l=d=null;if(!b.useFlashBlock)if(b.useHighPerformance)d={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"};
else{d={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"};if(m)d.left=Math.abs(parseInt(d.left,10))+"px"}if(t.match(/webkit/i))b.oMC.style.zIndex=1E4;if(!b.debugFlash)for(h in d)if(d.hasOwnProperty(h))b.oMC.style[h]=d[h];try{x||b.oMC.appendChild(g);j.appendChild(b.oMC);if(x){l=b.oMC.appendChild(k.createElement("div"));l.className=b.swfCSS.swfBox;l.innerHTML=i}M=true}catch(S){throw Error(p("appXHTML"));}ja.check()}}e();b._wD("soundManager::createMovie(): Trying to load "+a+
(!this._overHTTP&&b.altURL?" (alternate URL)":""),1);return true};r=this.getSoundById;O=function(){if(z){Y();return false}if(b.o)return false;b.o=b.getMovie(b.id);if(!b.o){if(P){if(x)b.oMC.innerHTML=ka;else b.oMC.appendChild(P);P=null;F=true}else Y(b.id,b.url);b.o=b.getMovie(b.id)}if(b.o){b._wD("soundManager::initMovie(): Got "+b.o.nodeName+" element ("+(F?"created via JS":"static HTML")+")");n("waitEI")}b.oninitmovie instanceof Function&&setTimeout(b.oninitmovie,1);return true};ga=function(c){if(c)b.url=
c;O()};W=function(){setTimeout(xa,500)};xa=function(){if(aa)return false;aa=true;w(o,"load",W);if(L&&!qa){n("waitFocus");return false}var c;if(!q){c=b.getMoviePercent();b._wD(p("waitImpatient",c===100?" (SWF loaded)":c>0?" (SWF "+c+"% loaded)":""))}setTimeout(function(){c=b.getMoviePercent();if(!q){b._wD("soundManager: No Flash response within expected time.\nLikely causes: "+(c===0?"Loading "+b.movieURL+" may have failed (and/or Flash "+ua+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+
(b.debugFlash?" "+p("checkSWF"):""),2);if(!this._overHTTP&&c){n("localFail",2);b.debugFlash||n("tryDebug",2)}c===0&&b._wD(p("swf404",b.url));u("flashtojs",false,": Timed out"+this._overHTTP?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!q&&Ia)if(c===null)if(b.useFlashBlock||b.flashLoadTimeout===0){b.useFlashBlock&&la();n("waitForever")}else Z(true);else b.flashLoadTimeout===0?n("waitForever"):Z(true)},b.flashLoadTimeout)};ga=function(c){if(c)b.url=c;O()};n=function(c,
a){return c?b._wD(p(c),a):""};if(D.indexOf("debug=alert")+1&&b.debugMode)b._wD=function(c){alert(c)};ta=function(){var c=s(b.debugID),a=s(b.debugID+"-toggle");if(!c)return false;if(ea){a.innerHTML="+";c.style.display="none"}else{a.innerHTML="-";c.style.display="block"}ea=!ea};u=function(c,a,e){if(typeof sm2Debugger!=="undefined")try{sm2Debugger.handleEvent(c,a,e)}catch(g){}return true};J=function(){var c=[];b.debugMode&&c.push(b.swfCSS.sm2Debug);b.debugFlash&&c.push(b.swfCSS.flashDebug);b.useHighPerformance&&
c.push(b.swfCSS.highPerf);return c.join(" ")};la=function(){var c=p("fbHandler"),a=b.getMoviePercent();if(b.supported()){b.didFlashBlock&&b._wD(c+": Unblocked");if(b.oMC)b.oMC.className=J()+" "+b.swfCSS.swfDefault+(" "+b.swfCSS.swfUnblocked)}else{if(K){b.oMC.className=J()+" "+b.swfCSS.swfDefault+" "+(a===null?b.swfCSS.swfTimedout:b.swfCSS.swfError);b._wD(c+": "+p("fbTimeout")+(a?" ("+p("fbLoaded")+")":""))}b.didFlashBlock=true;G(true);b.onerror instanceof Function&&b.onerror.apply(o)}};C=function(){function c(){w(o,
"focus",C);w(o,"load",C)}if(qa||!L){c();return true}qa=Ia=true;b._wD("soundManager::handleFocus()");R&&L&&w(o,"mousemove",C);aa=false;c();return true};N=function(c){if(q)return false;if(z){b._wD("-- SoundManager 2: loaded --");q=true;G();H();return true}b.useFlashBlock&&b.flashLoadTimeout&&!b.getMoviePercent()||(q=true);b._wD("-- SoundManager 2 "+(v?"failed to load":"loaded")+" ("+(v?"security/load error":"OK")+") --",1);if(v||c){if(b.useFlashBlock)b.oMC.className=J()+" "+(b.getMoviePercent()===null?
b.swfCSS.swfTimedout:b.swfCSS.swfError);G();u("onload",false);b.onerror instanceof Function&&b.onerror.apply(o);return false}else u("onload",true);if(b.waitForWindowLoad&&!fa){n("waitOnload");B(o,"load",H);return false}else{b.waitForWindowLoad&&fa&&n("docLoaded");H()}return true};wa=function(c,a){E.push({method:c,scope:a||null,fired:false})};G=function(c){if(!q&&!c)return false;c={success:c?b.supported():!v};var a=[],e,g,f=!b.useFlashBlock||b.useFlashBlock&&!b.supported();e=0;for(g=E.length;e<g;e++)E[e].fired!==
true&&a.push(E[e]);if(a.length){b._wD("soundManager: Firing "+a.length+" onready() item"+(a.length>1?"s":""));e=0;for(g=a.length;e<g;e++){a[e].scope?a[e].method.apply(a[e].scope,[c]):a[e].method(c);if(!f)a[e].fired=true}}return true};H=function(){o.setTimeout(function(){b.useFlashBlock&&la();G();n("onload",1);b.onload instanceof Function&&b.onload.apply(o);n("onloadOK",1);b.waitForWindowLoad&&B(o,"load",H)},1)};Fa=function(){var c,a,e=!D.match(/usehtml5audio/i)&&!D.match(/sm2\-ignorebadua/i)&&R&&
t.match(/OS X 10_6_(3|4)/i);if(t.match(/iphone os (1|2|3_0|3_1)/i)?true:false){b.hasHTML5=false;z=true;if(b.oMC)b.oMC.style.display="none";return false}if(b.useHTML5Audio){if(!b.html5||!b.html5.canPlayType){b._wD("SoundManager: No HTML5 Audio() support detected.");b.hasHTML5=false;return true}else b.hasHTML5=true;if(e){b._wD("SoundManager::Note: Buggy HTML5 Audio in Safari on OS X 10.6.[3|4], see https://bugs.webkit.org/show_bug.cgi?id=32159 - disabling HTML5 audio",1);b.useHTML5Audio=false;b.hasHTML5=
false;return true}}else return true;for(a in b.audioFormats)if(b.audioFormats.hasOwnProperty(a)&&b.audioFormats[a].required&&!b.html5.canPlayType(b.audioFormats[a].type))c=true;if(b.ignoreFlash)c=false;z=b.useHTML5Audio&&b.hasHTML5&&!c;return c};V=function(){var c,a=[];n("init");if(q){n("didInit");return false}if(b.hasHTML5){for(c in b.audioFormats)b.audioFormats.hasOwnProperty(c)&&a.push(c+": "+b.html5[c]);b._wD("-- SoundManager 2: HTML5 support tests ("+b.html5Test+"): "+a.join(", ")+" --",1)}if(z){if(!q){w(o,
"load",b.beginDelayedInit);b.enabled=true;N()}return true}O();try{n("flashJS");b.o._externalInterfaceTest(false);b.allowPolling?Aa(true,b.useFastPolling?true:false):n("noPolling",1);b.debugMode||b.o._disableDebug();b.enabled=true;u("jstoflash",true)}catch(e){b._wD("js/flash exception: "+e.toString());u("jstoflash",false);Z(true);N();return false}N();w(o,"load",b.beginDelayedInit);return true};za=function(){if(na)return false;Y();O();return na=true};I=function(){if(ha)return false;ha=true;sa();Ga();
b.html5.usingFlash=Fa();K=b.html5.usingFlash;ha=true;k.removeEventListener&&k.removeEventListener("DOMContentLoaded",I,false);ga();return true};Da=function(c){if(!c._hasTimer)c._hasTimer=true};Ea=function(c){if(c._hasTimer)c._hasTimer=false};ia=function(){b.onerror instanceof Function&&b.onerror();b.disable()};this._setSandboxType=function(c){var a=b.sandbox;a.type=c;a.description=a.types[typeof a.types[c]!=="undefined"?c:"unknown"];b._wD("Flash security sandbox type: "+a.type);if(a.type==="localWithFile"){a.noRemote=
true;a.noLocal=false;n("secNote",2)}else if(a.type==="localWithNetwork"){a.noRemote=false;a.noLocal=true}else if(a.type==="localTrusted"){a.noRemote=false;a.noLocal=false}};this._externalInterfaceOK=function(c){if(b.swfLoaded)return false;var a=(new Date).getTime();b._wD("soundManager::externalInterfaceOK()"+(c?" (~"+(a-c)+" ms)":""));u("swf",true);u("flashtojs",true);b.swfLoaded=true;L=false;x?setTimeout(V,100):V()};oa=function(){if(k.readyState==="complete"){I();k.detachEvent("onreadystatechange",
oa)}return true};if(!b.hasHTML5||K){B(o,"focus",C);B(o,"load",C);B(o,"load",W);R&&L&&B(o,"mousemove",C)}if(k.addEventListener)k.addEventListener("DOMContentLoaded",I,false);else if(k.attachEvent)k.attachEvent("onreadystatechange",oa);else{u("onload",false);ia()}k.readyState==="complete"&&setTimeout(I,100)}var Ja=null;if(typeof SM2_DEFER==="undefined"||!SM2_DEFER)Ja=new ra;T.SoundManager=ra;T.soundManager=Ja})(window);
