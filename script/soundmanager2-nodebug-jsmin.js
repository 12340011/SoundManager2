/*
   SoundManager 2: Javascript Sound for the Web
   --------------------------------------------
   http://schillmania.com/projects/soundmanager2/

   Copyright (c) 2007, Scott Schiller. All rights reserved.
   Code provided under the BSD License:
   http://schillmania.com/projects/soundmanager2/license.txt

   V2.95b.20100323+DEV
*/
(function(c){var b=null;function a(ac,g){this.flashVersion=8;this.debugMode=false;this.debugFlash=false;this.useConsole=true;this.consoleOnly=false;this.waitForWindowLoad=false;this.nullURL="null.mp3";this.allowPolling=true;this.useFastPolling=false;this.useMovieStar=false;this.bgColor="#ffffff";this.useHighPerformance=false;this.flashLoadTimeout=1000;this.wmode=null;this.allowFullScreen=true;this.allowScriptAccess="always";this.useFlashBlock=false;this.enableHTML5Audio=true;this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5000,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:true,multiShotEvents:false,position:null,pan:0,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={onmetadata:null,useVideo:false,bufferTime:3};this.version=null;this.versionNumber="V2.95b.20100323+DEV";this.movieURL=null;this.url=(ac||null);this.altURL=null;this.swfLoaded=false;this.enabled=false;this.o=null;this.movieID="sm2-container";this.id=(g||"sm2movie");this.swfCSS={swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.isFullScreen=false;this.isIE=(navigator.userAgent.match(/MSIE/i));this.isSafari=(navigator.userAgent.match(/safari/i));this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.specialWmodeCase=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?\.*)?$/i,flash9:/\.mp3(\?\.*)?$/i};this.baseMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"];this.netStreamPattern=new RegExp("\\.("+this.netStreamTypes.join("|")+")(\\?.*)?$","i");this.mimePattern=this.baseMimeTypes;this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};var u,S=this,w="soundManager",O,t,ad,K=[],f=true,U,d=false,af=false,p=false,j=false,h=false,l,ag,r,F,ae,G,s,n,i,H,y,A,ah,P,N,m,M,I,Z=["log","info","warn","error"],J=8,e,z,k,E=null,q=null,L,Q,X,B,aj,R,D,Y=false,W=false,v,V,ab,o,T=(typeof console!=="undefined"&&typeof console.log!=="undefined"),ai=(document.location?document.location.protocol.match(/http/i):null),C=(typeof document.hasFocus!=="undefined"?document.hasFocus():null),aa=(typeof document.hasFocus==="undefined"&&this.isSafari),x=!aa;(function(){var ak=(typeof Audio!=="undefined"?new Audio("about:blank"):null);function al(am){return(ak&&typeof ak.canPlayType==="function"&&ak.canPlayType(am)!==""&&ak.canPlayType(am)!=="no")}S.html5_audio_capabilities={mp3:al("audio/mpeg"),aac:al("audio/aac"),ogg:al("audio/ogg")};ak=null}());this.useAltURL=!ai;if(this.enableHTML5Audio&&!this.html5_audio_capabilities.mp3){this.enableHTML5Audio=false}this.supported=function(){return(p&&!j)};this.getMovie=function(ak){return S.isIE?c[ak]:(S.isSafari?O(ak)||document[ak]:O(ak))};this.loadFromXML=function(ak){try{S.o._loadFromXML(ak)}catch(al){z();return true}};this.createSound=function(al){var an="soundManager.createSound(): ",am=null,ak=null;if(!p){throw R(an+L("notReady"),arguments.callee.caller)}if(arguments.length===2){al={id:arguments[0],url:arguments[1]}}am=F(al);ak=am;if(D(ak.id,true)){return S.sounds[ak.id]}if(S.flashVersion>8&&S.useMovieStar){if(ak.isMovieStar===null){ak.isMovieStar=(ak.url.match(S.netStreamPattern)?true:false)}if(ak.isMovieStar){}if(ak.isMovieStar&&ak.usePeakData){ak.usePeakData=false}}am=aj(am);S.sounds[ak.id]=new u(ak);S.soundIDs.push(ak.id);if(S.enableHTML5Audio){S.sounds[ak.id]._setup_html5({url:ak.url})}else{if(S.flashVersion===8){S.o._createSound(ak.id,ak.onjustbeforefinishtime,ak.loops||1)}else{S.o._createSound(ak.id,ak.url,ak.onjustbeforefinishtime,ak.usePeakData,ak.useWaveformData,ak.useEQData,ak.isMovieStar,(ak.isMovieStar?ak.useVideo:false),(ak.isMovieStar?ak.bufferTime:false),ak.loops||1)}}if(ak.autoLoad||ak.autoPlay){if(S.sounds[ak.id]){S.sounds[ak.id].load(ak)}}if(ak.autoPlay){S.sounds[ak.id].play()}return S.sounds[ak.id]};this.createVideo=function(ak){var al="soundManager.createVideo(): ";if(arguments.length===2){ak={id:arguments[0],url:arguments[1]}}if(S.flashVersion>=9){ak.isMovieStar=true;ak.useVideo=true}else{return false}if(!S.useMovieStar){}return S.createSound(ak)};this.destroySound=function(al,ak){if(!D(al)){return false}for(var am=0;am<S.soundIDs.length;am++){if(S.soundIDs[am]===al){S.soundIDs.splice(am,1);continue}}S.sounds[al].unload();if(!ak){S.sounds[al].destruct()}delete S.sounds[al]};this.destroyVideo=this.destroySound;this.load=function(ak,al){if(!D(ak)){return false}S.sounds[ak].load(al)};this.unload=function(ak){if(!D(ak)){return false}S.sounds[ak].unload()};this.play=function(ak,al){var am="soundManager.play(): ";if(!p){throw R(am+L("notReady"),arguments.callee.caller)}if(!D(ak)){if(!(al instanceof Object)){al={url:al}}if(al&&al.url){al.id=ak;return S.createSound(al).play()}else{return false}}S.sounds[ak].play(al)};this.start=this.play;this.setPosition=function(ak,al){if(!D(ak)){return false}S.sounds[ak].setPosition(al)};this.stop=function(ak){if(!D(ak)){return false}S.sounds[ak].stop()};this.stopAll=function(){for(var ak in S.sounds){if(S.sounds[ak] instanceof u){S.sounds[ak].stop()}}};this.pause=function(ak){if(!D(ak)){return false}S.sounds[ak].pause()};this.pauseAll=function(){for(var ak=S.soundIDs.length;ak--;){S.sounds[S.soundIDs[ak]].pause()}};this.resume=function(ak){if(!D(ak)){return false}S.sounds[ak].resume()};this.resumeAll=function(){for(var ak=S.soundIDs.length;ak--;){S.sounds[S.soundIDs[ak]].resume()}};this.togglePause=function(ak){if(!D(ak)){return false}S.sounds[ak].togglePause()};this.setPan=function(ak,al){if(!D(ak)){return false}S.sounds[ak].setPan(al)};this.setVolume=function(al,ak){if(!D(al)){return false}S.sounds[al].setVolume(ak)};this.mute=function(ak){var am="soundManager.mute(): ",al=0;if(typeof ak!=="string"){ak=null}if(!ak){for(al=S.soundIDs.length;al--;){S.sounds[S.soundIDs[al]].mute()}S.muted=true}else{if(!D(ak)){return false}S.sounds[ak].mute()}};this.muteAll=function(){S.mute()};this.unmute=function(ak){var am="soundManager.unmute(): ",al;if(typeof ak!=="string"){ak=null}if(!ak){for(al=S.soundIDs.length;al--;){S.sounds[S.soundIDs[al]].unmute()}S.muted=false}else{if(!D(ak)){return false}S.sounds[ak].unmute()}};this.unmuteAll=function(){S.unmute()};this.toggleMute=function(ak){if(!D(ak)){return false}S.sounds[ak].toggleMute()};this.getMemoryUse=function(){if(S.flashVersion===8){return 0}if(S.o){return parseInt(S.o._getMemoryUse(),10)}};this.disable=function(al){if(typeof al==="undefined"){al=false}if(j){return false}j=true;for(var ak=S.soundIDs.length;ak--;){e(S.sounds[S.soundIDs[ak]])}r(al)};this.canPlayMIME=function(ak){return(ak?(ak.match(S.mimePattern)?true:false):null)};this.canPlayURL=function(ak){return(ak?(ak.match(S.filePattern)?true:false):null)};this.canPlayLink=function(ak){if(typeof ak.type!=="undefined"&&ak.type){if(S.canPlayMIME(ak.type)){return true}}return S.canPlayURL(ak.href)};this.getSoundById=function(al,am){if(!al){throw new Error("SoundManager.getSoundById(): sID is null/undefined")}var ak=S.sounds[al];if(!ak&&!am){}return ak};this.onready=function(al,ak){if(al&&al instanceof Function){if(p){}if(!ak){ak=c}ae(al,ak);G();return true}else{throw L("needFunction")}};this.oninitmovie=function(){};this.onload=function(){};this.onerror=function(){};this.getMoviePercent=function(){return(S.o&&typeof S.o.PercentLoaded!=="undefined"?S.o.PercentLoaded():null)};this._writeDebug=function(ak,am,al){};this._wD=this._writeDebug;this._debug=function(){};this.reboot=function(){if(S.soundIDs.length){}for(var ak=S.soundIDs.length;ak--;){S.sounds[S.soundIDs[ak]].destruct()}try{if(S.isIE){q=S.o.innerHTML}E=S.o.parentNode.removeChild(S.o)}catch(al){}q=null;E=null;S.enabled=false;p=false;Y=false;W=false;d=false;af=false;j=false;S.swfLoaded=false;S.soundIDs={};S.sounds=[];S.o=null;for(ak=K.length;ak--;){K[ak].fired=false}c.setTimeout(b.beginDelayedInit,20)};this.destruct=function(){S.disable(true)};this.beginDelayedInit=function(){h=true;setTimeout(i,500);setTimeout(A,20)};ah={};O=function(ak){return document.getElementById(ak)};ag=0;L=function(){var ao=Array.prototype.slice.call(arguments),an=ao.shift(),am=(ah&&ah[an]?ah[an]:""),al,ak;if(am&&ao&&ao.length){for(al=0,ak=ao.length;al<ak;al++){am=am.replace("%s",ao[al])}}return am};aj=function(ak){if(S.flashVersion===8&&ak.loops>1&&ak.stream){ak.stream=false}return ak};R=function(am,an){var al="Error: ",ak;if(!an){return new Error(al+am)}if(typeof console!=="undefined"&&typeof console.trace!=="undefined"){console.trace()}ak=al+am+". \nCaller: "+an.toString();return new Error(ak)};t=function(){return false};e=function(al){for(var ak in al){if(al.hasOwnProperty(ak)&&typeof al[ak]==="function"){al[ak]=t}}ak=null};z=function(ak){if(typeof ak==="undefined"){ak=false}if(j||ak){S.disable(ak)}};k=function(ak){var al=null;if(ak){if(ak.match(/\.swf(\?\.*)?$/i)){al=ak.substr(ak.toLowerCase().lastIndexOf(".swf?")+4);if(al){return ak}}else{if(ak.lastIndexOf("/")!==ak.length-1){ak=ak+"/"}}}return(ak&&ak.lastIndexOf("/")!==-1?ak.substr(0,ak.lastIndexOf("/")+1):"./")+S.movieURL};H=function(){if(S.flashVersion!==8&&S.flashVersion!==9){alert(L("badFV",S.flashVersion,J));S.flashVersion=J}S.version=S.versionNumber+(S.flashVersion===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(S.flashVersion>8){S.defaultOptions=F(S.defaultOptions,S.flash9Options);S.features.buffering=true}if(S.flashVersion>8&&S.useMovieStar){S.defaultOptions=F(S.defaultOptions,S.movieStarOptions);S.filePatterns.flash9=new RegExp("\\.(mp3|"+S.netStreamTypes.join("|")+")(\\?.*)?$","i");S.mimePattern=S.netStreamMimeTypes;S.features.movieStar=true}else{S.useMovieStar=false;S.features.movieStar=false}S.filePattern=S.filePatterns[(S.flashVersion!==8?"flash9":"flash8")];S.movieURL=(S.flashVersion===8?"soundmanager2.swf":"soundmanager2_flash9.swf");S.features.peakData=S.features.waveformData=S.features.eqData=(S.flashVersion>8)};m=function(){return(document.body?document.body:(document.documentElement?document.documentElement:document.getElementsByTagName("div")[0]))};I=function(ak,al){if(!S.o||!S.allowPolling){return false}S.o._setPolling(ak,al)};M=function(aA,ap){var av=null,az=(ap?ap:S.url),au=(S.altURL?S.altURL:az),aD,aq,aC,aw,at,al,am,ay,ax,ar,an,ao,aE,ak="100%";aA=(typeof aA==="undefined"?S.id:aA);if(S.debugURLParam.test(c.location.href.toString())){S.debugMode=true}if(d&&af){return false}d=true;H();S.url=k(ai?az:au);ap=S.url;if(S.useHighPerformance&&S.useMovieStar&&S.defaultOptions.useVideo===true){av="soundManager note: disabling highPerformance, not applicable with movieStar mode+useVideo";S.useHighPerformance=false}S.wmode=(!S.wmode&&S.useHighPerformance&&!S.useMovieStar?"transparent":S.wmode);if(S.wmode!==null&&!S.isIE&&!S.useHighPerformance&&navigator.platform.match(/win32/i)){S.specialWmodeCase=true;S.wmode=null}if(S.flashVersion===8){S.allowFullScreen=false}aD={name:aA,id:aA,src:ap,width:ak,height:ak,quality:"high",allowScriptAccess:S.allowScriptAccess,bgcolor:S.bgColor,pluginspage:"http://www.macromedia.com/go/getflashplayer",type:"application/x-shockwave-flash",wmode:S.wmode,allowfullscreen:(S.allowFullScreen?"true":"false")};if(S.debugFlash){aD.FlashVars="debug=1"}if(!S.wmode){delete aD.wmode}if(S.isIE){aq=document.createElement("div");aw='<object id="'+aA+'" data="'+ap+'" type="'+aD.type+'" width="'+aD.width+'" height="'+aD.height+'"><param name="movie" value="'+ap+'" /><param name="AllowScriptAccess" value="'+S.allowScriptAccess+'" /><param name="quality" value="'+aD.quality+'" />'+(S.wmode?'<param name="wmode" value="'+S.wmode+'" /> ':"")+'<param name="bgcolor" value="'+S.bgColor+'" /><param name="allowFullScreen" value="'+aD.allowFullScreen+'" />'+(S.debugFlash?'<param name="FlashVars" value="'+aD.FlashVars+'" />':"")+"<!-- --></object>"}else{aq=document.createElement("embed");for(aC in aD){if(aD.hasOwnProperty(aC)){aq.setAttribute(aC,aD[aC])}}}ax=X();ay=m();if(ay){S.oMC=O(S.movieID)?O(S.movieID):document.createElement("div");if(!S.oMC.id){S.oMC.id=S.movieID;S.oMC.className=S.swfCSS.swfDefault+" "+ax;ar=null;at=null;if(!S.useFlashBlock){if(S.useHighPerformance){ar={position:"fixed",width:"6px",height:"6px",bottom:"0px",left:"0px",overflow:"hidden"}}else{ar={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"}}}an=null;if(!S.debugFlash){for(an in ar){if(ar.hasOwnProperty(an)){S.oMC.style[an]=ar[an]}}}try{if(!S.isIE){S.oMC.appendChild(aq)}ay.appendChild(S.oMC);if(S.isIE){at=S.oMC.appendChild(document.createElement("div"));at.className="sm2-object-box";at.innerHTML=aw}af=true}catch(aB){throw new Error(L("appXHTML"))}}else{aE=S.oMC.className;S.oMC.className=(aE?aE+" ":S.swfCSS.swfDefault)+(ax?" "+ax:"");S.oMC.appendChild(aq);if(S.isIE){at=S.oMC.appendChild(document.createElement("div"));at.className="sm2-object-box";at.innerHTML=aw}af=true}}if(av){}};D=this.getSoundById;F=function(al,ak){var ao={},am,an,ap;for(am in al){if(al.hasOwnProperty(am)){ao[am]=al[am]}}an=(typeof ak==="undefined"?S.defaultOptions:ak);for(ap in an){if(an.hasOwnProperty(ap)&&typeof ao[ap]==="undefined"){ao[ap]=an[ap]}}return ao};P=function(){if(S.o){return false}S.o=S.getMovie(S.id);if(!S.o){if(!E){M(S.id,S.url)}else{if(!S.isIE){S.oMC.appendChild(E)}else{S.oMC.innerHTML=q}E=null;d=true}S.o=S.getMovie(S.id)}if(S.o){}if(typeof S.oninitmovie==="function"){setTimeout(S.oninitmovie,1)}};n=function(ak){if(ak){S.url=ak}P()};i=function(){if(Y){return false}Y=true;if(aa&&!C){return false}var ak;if(!p){ak=S.getMoviePercent()}setTimeout(function(){ak=S.getMoviePercent();if(!p){if(!ai&&ak){if(!S.debugFlash){}}if(ak===0){}}if(!p&&x){if(ak===null){if(S.useFlashBlock||S.flashLoadTimeout===0){if(S.useFlashBlock){Q()}}else{z(true)}}else{if(S.flashLoadTimeout===0){}else{z(true)}}}},S.flashLoadTimeout)};X=function(){var ak=[];if(S.debugMode){ak.push(S.swfCSS.sm2Debug)}if(S.debugFlash){ak.push(S.swfCSS.flashDebug)}if(S.useHighPerformance){ak.push(S.swfCSS.highPerf)}return ak.join(" ")};Q=function(){var ak="soundManager::flashBlockHandler()",al=S.getMoviePercent();if(!S.supported()){S.oMC.className=X()+" "+S.swfCSS.swfDefault+" "+(al===null?S.swfCSS.swfTimedout:S.swfCSS.swfError);G(true);if(S.onerror instanceof Function){S.onerror.apply(c)}S.didFlashBlock=true}else{if(S.didFlashBlock){}S.oMC.className=X()+" "+S.swfCSS.swfDefault+(" "+S.swfCSS.swfUnblocked)}};y=function(){if(C||!aa){return true}x=true;C=true;if(aa){c.removeEventListener("mousemove",y,false)}Y=false;setTimeout(i,500);if(c.removeEventListener){c.removeEventListener("focus",y,false)}else{if(c.detachEvent){c.detachEvent("onfocus",y)}}};r=function(al){if(p){return false}var am=S.oMC.className,ak=(S.useFlashBlock&&S.flashLoadTimeout&&!S.getMoviePercent());if(!ak){p=true}if(j||al){if(S.useFlashBlock){S.oMC.className=X()+" "+(S.getMoviePercent()===null?S.swfCSS.swfTimedout:S.swfCSS.swfError)}G();if(S.onerror instanceof Function){S.onerror.apply(c)}return false}else{}if(S.waitForWindowLoad&&!h){if(c.addEventListener){c.addEventListener("load",s,false)}else{if(c.attachEvent){c.attachEvent("onload",s)}}return false}else{if(S.waitForWindowLoad&&h){}s()}};ae=function(al,ak){K.push({method:al,scope:(ak||null),fired:false})};G=function(ap){if(!p&&!ap){return false}var al={success:(ap?S.supported():!j)},ak=[],ao,an,am=(!S.useFlashBlock||(S.useFlashBlock&&!S.supported()));for(ao=0,an=K.length;ao<an;ao++){if(K[ao].fired!==true){ak.push(K[ao])}}if(ak.length){for(ao=0,an=ak.length;ao<an;ao++){if(ak[ao].scope){ak[ao].method.apply(ak[ao].scope,[al])}else{ak[ao].method(al)}if(!am){ak[ao].fired=true}}}};s=function(){c.setTimeout(function(){if(S.useFlashBlock){Q()}G();S.onload.apply(c)})};ad=function(){P();if(p){return false}if(c.removeEventListener){c.removeEventListener("load",S.beginDelayedInit,false)}else{if(c.detachEvent){c.detachEvent("onload",S.beginDelayedInit)}}try{S.o._externalInterfaceTest(false);if(!S.allowPolling){}else{I(true,S.useFastPolling?true:false)}if(!S.debugMode){S.o._disableDebug()}S.enabled=true}catch(ak){z(true);r();return false}r()};A=function(){if(W){return false}M();P();W=true;return true};N=function(){if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",N,false)}n()};V=function(){var al,ak=0,am=null;for(al=S.soundIDs.length;al--;){am=S.sounds[S.soundIDs[al]];ak+=(am._onTimer()===true?1:0)}if(!ak){c.clearInterval(v);v=null}};ab=function(ak){if(!ak._hasTimer){ak._hasTimer=true}if(!v){v=c.setInterval(V,S.useFastPolling?33:100)}};o=function(ak){if(ak._hasTimer){ak._hasTimer=false}};this._setSandboxType=function(ak){var al=S.sandbox;al.type=ak;al.description=al.types[(typeof al.types[ak]!=="undefined"?ak:"unknown")];if(al.type==="localWithFile"){al.noRemote=true;al.noLocal=false}else{if(al.type==="localWithNetwork"){al.noRemote=false;al.noLocal=true}else{if(al.type==="localTrusted"){al.noRemote=false;al.noLocal=false}}}};this._externalInterfaceOK=function(ak){if(S.swfLoaded){return false}var al=new Date().getTime();S.swfLoaded=true;aa=false;if(S.isIE){setTimeout(ad,100)}else{ad()}};this._onfullscreenchange=function(ak){S.isFullScreen=(ak===1?true:false);if(!S.isFullScreen){try{c.focus()}catch(al){}}};u=function(al){var ao=this,ap,am,an,ak;this.sID=al.id;this.url=al.url;this.options=F(al);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this._lastURL=null;this.useHTML5=S.enableHTML5Audio;this.id3={};this._debug=function(){};this._debug();this.load=function(aq){var ar=null;if(typeof aq!=="undefined"){ao._iO=F(aq);ao.instanceOptions=ao._iO}else{aq=ao.options;ao._iO=aq;ao.instanceOptions=ao._iO;if(ao._lastURL&&ao._lastURL!==ao.url){ao._iO.url=ao.url;ao.url=null}}if(typeof ao._iO.url==="undefined"){ao._iO.url=ao.url}if(ao._iO.url===ao.url&&ao.readyState!==0&&ao.readyState!==2){return false}ao.url=ao._iO.url;ao._lastURL=ao._iO.url;ao.loaded=false;ao.readyState=1;ao.playState=0;ao._iO=aj(ao._iO);try{if(ao.useHTML5){ar=ao._setup_html5({url:ao._iO.url});ar.load();if(ao._iO.autoPlay){ao.play()}}else{if(S.flashVersion===8){S.o._load(ao.sID,ao._iO.url,ao._iO.stream,ao._iO.autoPlay,(ao._iO.whileloading?1:0),ao._iO.loops||1)}else{S.o._load(ao.sID,ao._iO.url,ao._iO.stream?true:false,ao._iO.autoPlay?true:false,ao._iO.loops||1);if(ao._iO.isMovieStar&&ao._iO.autoLoad&&!ao._iO.autoPlay){ao.pause()}}}}catch(at){S.onerror();S.disable()}};this.unload=function(){if(ao.readyState!==0){if(ao.readyState!==2){ao.setPosition(0,true)}if(!ao.useHTML5){S.o._unload(ao.sID,S.nullURL)}else{an();if(ao.__element){ao.__element.pause();ao.__element=null}}ap()}};this.destruct=function(){if(!ao.useHTML5){S.o._destroySound(ao.sID)}else{an();if(ao.__element){ao.__element.pause();ao.__element=null;ao._added_events=false}}S.destroySound(ao.sID,true)};this.play=function(ar){var at="SMSound.play(): ",aq;if(!ar){ar={}}ao._iO=F(ar,ao._iO);ao._iO=F(ao._iO,ao.options);ao.instanceOptions=ao._iO;if(ao.useHTML5){ao._setup_html5({url:ao._iO.url});ak()}if(ao.playState===1){aq=ao._iO.multiShot;if(!aq){return false}else{if(ao.useHTML5){ao.setPosition(ao._iO.position)}}}if(!ao.loaded){if(ao.readyState===0){ao._iO.autoPlay=true;ao.load(ao._iO)}else{if(ao.readyState===2){return false}else{}}}else{}if(ao.paused){ao.resume()}else{if(ao.useHTML5&&ao.playState===1){return true}ao.playState=1;if(!ao.instanceCount||(S.flashVersion>8&&!ao.useHTML5)){ao.instanceCount++}ao.position=(typeof ao._iO.position!=="undefined"&&!isNaN(ao._iO.position)?ao._iO.position:0);ao._iO=aj(ao._iO);if(ao._iO.onplay){ao._iO.onplay.apply(ao)}ao.setVolume(ao._iO.volume,true);ao.setPan(ao._iO.pan,true);if(!ao.useHTML5){S.o._start(ao.sID,ao._iO.loop||1,(S.flashVersion===9?ao.position:ao.position/1000))}else{ak();ao._setup_html5().play()}}};this.start=this.play;this.stop=function(aq){if(ao.playState===1){ao.playState=0;ao.paused=false;if(ao._iO.onstop){ao._iO.onstop.apply(ao)}if(!ao.useHTML5){S.o._stop(ao.sID,aq)}else{if(ao.__element){ao.__element.pause();ao.setPosition(0);V();an()}}ao.instanceCount=0;ao._iO={}}};this.setPosition=function(ar,aq){if(typeof ar==="undefined"){ar=0}var at=Math.min(ao.duration,Math.max(ar,0));ao._iO.position=at;if(!aq){}if(!ao.useHTML5){S.o._setPosition(ao.sID,(S.flashVersion===9?ao._iO.position:ao._iO.position/1000),(ao.paused||!ao.playState))}else{if(ao.__element){if(ao.playState){ao.__element.currentTime=ao._iO.position/1000}else{}if(ao.paused){V(true)}}}};this.pause=function(){if(ao.paused||ao.playState===0){return false}ao.paused=true;if(!ao.useHTML5){S.o._pause(ao.sID)}else{ao._setup_html5().pause();an()}if(ao._iO.onpause){ao._iO.onpause.apply(ao)}};this.resume=function(){if(!ao.paused||ao.playState===0){return false}ao.paused=false;if(!ao.useHTML5){S.o._pause(ao.sID)}else{ao._setup_html5().play();ak()}if(ao._iO.onresume){ao._iO.onresume.apply(ao)}};this.togglePause=function(){if(ao.playState===0){ao.play({position:(S.flashVersion===9&&!ao.useHTML5?ao.position:ao.position/1000)});return false}if(ao.paused){ao.resume()}else{ao.pause()}};this.setPan=function(ar,aq){if(typeof ar==="undefined"){ar=0}if(typeof aq==="undefined"){aq=false}if(!ao.useHTML5){S.o._setPan(ao.sID,ar)}else{}ao._iO.pan=ar;if(!aq){ao.pan=ar}};this.setVolume=function(aq,ar){if(typeof aq==="undefined"){aq=100}if(typeof ar==="undefined"){ar=false}if(!ao.useHTML5){S.o._setVolume(ao.sID,(S.muted&&!ao.muted)||ao.muted?0:aq)}else{if(ao.__element){ao.__element.volume=ao.muted?0:(aq/100)}}ao._iO.volume=aq;if(!ar){ao.volume=aq}};this.mute=function(){ao.muted=true;if(!ao.useHTML5){S.o._setVolume(ao.sID,0)}else{ao.setVolume(0,false)}};this.unmute=function(){ao.muted=false;var aq=typeof ao._iO.volume!=="undefined";if(!ao.useHTML5){S.o._setVolume(ao.sID,aq?ao._iO.volume:ao.options.volume)}else{ao.setVolume((aq?ao._iO.volume:ao.options.volume))}};this.toggleMute=function(){if(ao.muted){ao.unmute()}else{ao.mute()}};this._onTimer=function(aq){if(ao._hasTimer||aq){if(ao.__element&&(aq||((ao.playState>0||ao.readyState===1)&&!ao.paused))){ao.duration=((ao.__element.duration*1000)||null);ao.durationEstimate=ao.duration;ao._whileplaying(((ao.__element.currentTime*1000)||0),{},{},{},{});return true}else{return false}}};ak=function(){if(ao.useHTML5){ab(ao)}};an=function(){if(ao.useHTML5){o(ao)}};ap=function(aq){ao._hasTimer=null;ao._added_events=null;ao.__element=null;ao.bytesLoaded=null;ao.bytesTotal=null;ao.position=null;ao.duration=null;ao.durationEstimate=null;ao.loaded=false;ao.playState=0;ao.paused=false;ao.readyState=0;ao.muted=false;ao.didBeforeFinish=false;ao.didJustBeforeFinish=false;ao.isBuffering=false;ao.instanceOptions={};ao.instanceCount=0;ao.peakData={left:0,right:0};ao.waveformData={left:[],right:[]};ao.eqData=[];ao.eqData.left=[];ao.eqData.right=[]};ap();this._setup_html5=function(ar){if(ao.__element){return ao.__element}var aq=F(ao._iO,ar);ao.__element=new Audio(aq.url);am();return ao.__element};am=function(){if(ao._added_events){return false}ao._added_events=true;ao.__element.addEventListener("load",function(){if(ao.__element){ao._whileloading(ao.bytesTotal,ao.bytesTotal,((ao.__element.duration*1000)||undefined));ao._onload(1)}});ao.__element.addEventListener("progress",function(aq){if(!ao.loaded&&ao.__element){ao._whileloading(aq.loaded||0,aq.total||1,((ao.__element.duration*1000)||undefined))}});ao.__element.addEventListener("end",function(aq){ao._onfinish()});setTimeout(function(){if(ao&&ao.__element){ao.__element.addEventListener("ended",function(aq){ao._onfinish()})}},250)};this._whileloading=function(aq,ar,at){if(!ao._iO.isMovieStar){ao.bytesLoaded=aq;ao.bytesTotal=ar;ao.duration=Math.floor(at);ao.durationEstimate=parseInt((ao.bytesTotal/ao.bytesLoaded)*ao.duration,10);if(ao.durationEstimate===undefined){ao.durationEstimate=ao.duration}if(ao.readyState!==3&&ao._iO.whileloading){ao._iO.whileloading.apply(ao)}}else{ao.bytesLoaded=aq;ao.bytesTotal=ar;ao.duration=Math.floor(at);ao.durationEstimate=ao.duration;if(ao.readyState!==3&&ao._iO.whileloading){ao._iO.whileloading.apply(ao)}}};this._onid3=function(au,aq){var av=[],at,ar;for(at=0,ar=au.length;at<ar;at++){av[au[at]]=aq[at]}ao.id3=F(ao.id3,av);if(ao._iO.onid3){ao._iO.onid3.apply(ao)}};this._whileplaying=function(at,au,aw,ar,av){if(isNaN(at)||at===null){return false}if(ao.playState===0&&at>0){at=0}ao.position=at;if(S.flashVersion>8&&!ao.useHTML5){if(ao._iO.usePeakData&&typeof au!=="undefined"&&au){ao.peakData={left:au.leftPeak,right:au.rightPeak}}if(ao._iO.useWaveformData&&typeof aw!=="undefined"&&aw){ao.waveformData={left:aw.split(","),right:ar.split(",")}}if(ao._iO.useEQData){if(typeof av!=="undefined"&&av&&av.leftEQ){var aq=av.leftEQ.split(",");ao.eqData=aq;ao.eqData.left=aq;if(typeof av.rightEQ!=="undefined"&&av.rightEQ){ao.eqData.right=av.rightEQ.split(",")}}}}if(ao.playState===1){if(ao.isBuffering){ao._onbufferchange(0)}if(ao._iO.whileplaying){ao._iO.whileplaying.apply(ao)}if(ao.loaded&&ao._iO.onbeforefinish&&ao._iO.onbeforefinishtime&&!ao.didBeforeFinish&&ao.duration-ao.position<=ao._iO.onbeforefinishtime){ao._onbeforefinish()}}};this._onload=function(ar){var aq="SMSound._onload(): ";ar=(ar===1?true:false);if(!ar&&!ao.useHTML5){if(S.sandbox.noRemote===true){}if(S.sandbox.noLocal===true){}}ao.loaded=ar;ao.readyState=ar?3:2;if(ao._iO.onload){ao._iO.onload.apply(ao)}};this._onbeforefinish=function(){if(!ao.didBeforeFinish){ao.didBeforeFinish=true;if(ao._iO.onbeforefinish){ao._iO.onbeforefinish.apply(ao)}}};this._onjustbeforefinish=function(aq){if(!ao.didJustBeforeFinish){ao.didJustBeforeFinish=true;if(ao._iO.onjustbeforefinish){ao._iO.onjustbeforefinish.apply(ao)}}};this._onfinish=function(){if(ao._iO.onbeforefinishcomplete){ao._iO.onbeforefinishcomplete.apply(ao)}ao.didBeforeFinish=false;ao.didJustBeforeFinish=false;if(ao.instanceCount){ao.instanceCount--;if(!ao.instanceCount){ao.playState=0;ao.paused=false;ao.instanceCount=0;ao.instanceOptions={};an()}if(!ao.instanceCount||ao._iO.multiShotEvents){if(ao._iO.onfinish){ao._iO.onfinish.apply(ao)}}}else{if(ao.useVideo){}}};this._onmetadata=function(ar){var aq="SMSound.onmetadata()";if(!ar.width&&!ar.height){ar.width=320;ar.height=240}ao.metadata=ar;ao.width=ar.width;ao.height=ar.height;if(ao._iO.onmetadata){ao._iO.onmetadata.apply(ao)}};this._onbufferchange=function(ar){var aq="SMSound._onbufferchange()";if(ao.playState===0){return false}if(ar===ao.isBuffering){return false}ao.isBuffering=(ar===1?true:false);if(ao._iO.onbufferchange){ao._iO.onbufferchange.apply(ao)}};this._ondataerror=function(aq){if(ao.playState>0){if(ao._iO.ondataerror){ao._iO.ondataerror.apply(ao)}}else{}}};if(c.addEventListener){c.addEventListener("focus",y,false);c.addEventListener("load",S.beginDelayedInit,false);c.addEventListener("unload",S.destruct,false);if(aa){c.addEventListener("mousemove",y,false)}}else{if(c.attachEvent){c.attachEvent("onfocus",y);c.attachEvent("onload",S.beginDelayedInit);c.attachEvent("unload",S.destruct)}else{b.onerror();b.disable()}}if(document.addEventListener){document.addEventListener("DOMContentLoaded",N,false)}}if(typeof SM2_DEFER==="undefined"||!SM2_DEFER){b=new a()}c.SoundManager=a;c.soundManager=b}(window));