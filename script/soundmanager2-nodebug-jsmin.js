/*
   SoundManager 2: Javascript Sound for the Web
   --------------------------------------------
   http://schillmania.com/projects/soundmanager2/

   Copyright (c) 2007, Scott Schiller. All rights reserved.
   Code provided under the BSD License:
   http://schillmania.com/projects/soundmanager2/license.txt

   V2.95b.20100323+DEV
*/
(function(c){var b=null;function a(aj,h){this.flashVersion=8;this.debugMode=false;this.debugFlash=false;this.useConsole=true;this.consoleOnly=false;this.waitForWindowLoad=false;this.nullURL="null.mp3";this.allowPolling=true;this.useFastPolling=false;this.useMovieStar=false;this.bgColor="#ffffff";this.useHighPerformance=false;this.flashLoadTimeout=1000;this.wmode=null;this.allowFullScreen=true;this.allowScriptAccess="always";this.useFlashBlock=false;this.useHTML5Audio=true;this.requiredFormats={"audio/mpeg":true,"audio/aac":false};this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5000,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:true,multiShotEvents:false,position:null,pan:0,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={onmetadata:null,useVideo:false,bufferTime:3};this.version=null;this.versionNumber="V2.95b.20100323+DEV";this.movieURL=null;this.url=(aj||null);this.altURL=null;this.swfLoaded=false;this.enabled=false;this.o=null;this.movieID="sm2-container";this.id=(h||"sm2movie");this.swfCSS={swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.isFullScreen=false;this.isIE=(navigator.userAgent.match(/MSIE/i));this.isSafari=(navigator.userAgent.match(/safari/i));this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.specialWmodeCase=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?\.*)?$/i,flash9:/\.mp3(\?\.*)?$/i};this.baseMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"];this.netStreamPattern=new RegExp("\\.("+this.netStreamTypes.join("|")+")(\\?.*)?$","i");this.mimePattern=this.baseMimeTypes;this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.hasHTML5=null;var w,X=this,y="soundManager",T,v,ak,P=[],g=true,aa,e=false,am=false,r=false,k=false,i=false,m,an,t,J,al,K,u,p,j,L,A,D,ao,U,S,ac,n,R,M,ag=["log","info","warn","error"],O=8,f,B,l,I=null,s=null,Q,V,ae,E,aq,W,G,af=false,ad=false,x,ab,ai,q,o=true,d,H,Z,N,Y=(typeof console!=="undefined"&&typeof console.log!=="undefined"),ap=(document.location?document.location.protocol.match(/http/i):null),F=(typeof document.hasFocus!=="undefined"?document.hasFocus():null),ah=(typeof document.hasFocus==="undefined"&&this.isSafari),z=!ah;if(X.useHTML5Audio&&typeof Audio!=="undefined"){(function(){var au=(typeof Audio!=="undefined"?new Audio():null),az={mp3:"data:audio/*;base64,/+MYxAALOAHgCAAAAD////////////v6OGAfB8HwfAgIAgCAYB8HwfB8CAgCAIAgD4Pg+D4OAgCAIP9Xt6vb1CV0qLA0DQND/+MYxA4FcAHcAAAAAISgqCtvV7eqTEFNRTMuOTguNKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq/+MYxDMAAANIAAAAAKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",wav:"data:audio/wave;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQIAAAD//w=="},at={mp3:az.mp3.replace("*","mp3"),wav:az.wav},ax=0,ar=0,aw={};function av(aA){var aB=(au&&typeof au.canPlayType==="function"?au.canPlayType(aA).toLowerCase():false);return(aB&&(aB==="probably"||aB==="maybe"))}function ay(aE,aD){var aB,aA=false;ax++;function aC(aF,aG){ar++;if(!aA){aA=true;aw[aE]=aF;aD(aF)}if(ar>=ax&&!H){H=true;if(ac){p()}}}if(typeof aw[aE]!=="undefined"){aA=true;aD(aw[aE])}else{aB=new Audio();aB.addEventListener("canplaythrough",function(aF){if(typeof c.console!=="undefined"&&console.log){console.log("Audio()::canplaythrough(), type: "+aE)}aC(true,aF);aB=null},false);aB.addEventListener("error",function(aF){if(typeof c.console!=="undefined"&&console.log){console.log("Audio()::error(), code: "+this.error.code+", type: "+aE)}aC(false,this.error?this.error:aF);aB=null},false);setTimeout(function(){if(aB){aB.src=at[aE];aB.load()}},250)}}X.html5={canPlayType:(au?av:null),mp3:(av("audio/mpeg")||av("audio/mp3")),aac:av("audio/aac"),ogg:av("audio/ogg")};ay("mp3",function(aA){if(aA){X.html5.mp3=aA}else{ay("mpeg",function(aB){if(aB){X.html5.mp3=aB}})}});ay("wav",function(aA){X.html5.wav=aA})}())}else{}N=function(av){if(!X.useHTML5Audio||!X.hasHTML5){return false}var aw={mp3:"audio/mpeg",aac:"audio/aac"},au,ar,at=av.match(/\.(aac|mp3|mp4|ogg)/i);if(!at||!at.length){return false}else{at=at[0].substr(1)}if(typeof X.html5[at]!=="undefined"){return X.html5[at]}else{if(at&&aw[at]){au=aw[at]}else{au="audio/"+at}ar=X.html5.canPlayType(au);X.html5[at]=ar;return ar}};this.useAltURL=!ap;this.supported=function(){return(o?(r&&!k):(X.useHTML5Audio&&X.hasHTML5))};this.getMovie=function(ar){return X.isIE?c[ar]:(X.isSafari?T(ar)||document[ar]:T(ar))};this.loadFromXML=function(ar){try{X.o._loadFromXML(ar)}catch(at){B();return true}};this.createSound=function(at){var av="soundManager.createSound(): ",au=null,ar=null;if(!r){throw W(av+Q("notReady"),arguments.callee.caller)}if(arguments.length===2){at={id:arguments[0],url:arguments[1]}}au=J(at);ar=au;if(G(ar.id,true)){return X.sounds[ar.id]}if(X.flashVersion>8&&X.useMovieStar){if(ar.isMovieStar===null){ar.isMovieStar=(ar.url.match(X.netStreamPattern)?true:false)}if(ar.isMovieStar){}if(ar.isMovieStar&&ar.usePeakData){ar.usePeakData=false}}au=aq(au);X.sounds[ar.id]=new w(ar);X.soundIDs.push(ar.id);if(N(ar.url)){X.sounds[ar.id]._setup_html5({url:ar.url})}else{if(X.flashVersion===8){X.o._createSound(ar.id,ar.onjustbeforefinishtime,ar.loops||1)}else{X.o._createSound(ar.id,ar.url,ar.onjustbeforefinishtime,ar.usePeakData,ar.useWaveformData,ar.useEQData,ar.isMovieStar,(ar.isMovieStar?ar.useVideo:false),(ar.isMovieStar?ar.bufferTime:false),ar.loops||1)}}if(ar.autoLoad||ar.autoPlay){if(X.sounds[ar.id]){X.sounds[ar.id].load(ar)}}if(ar.autoPlay){X.sounds[ar.id].play()}return X.sounds[ar.id]};this.createVideo=function(ar){var at="soundManager.createVideo(): ";if(arguments.length===2){ar={id:arguments[0],url:arguments[1]}}if(X.flashVersion>=9){ar.isMovieStar=true;ar.useVideo=true}else{return false}if(!X.useMovieStar){}return X.createSound(ar)};this.destroySound=function(at,ar){if(!G(at)){return false}for(var au=0;au<X.soundIDs.length;au++){if(X.soundIDs[au]===at){X.soundIDs.splice(au,1);continue}}X.sounds[at].unload();if(!ar){X.sounds[at].destruct()}delete X.sounds[at]};this.destroyVideo=this.destroySound;this.load=function(ar,at){if(!G(ar)){return false}X.sounds[ar].load(at)};this.unload=function(ar){if(!G(ar)){return false}X.sounds[ar].unload()};this.play=function(ar,at){var au="soundManager.play(): ";if(!r){throw W(au+Q("notReady"),arguments.callee.caller)}if(!G(ar)){if(!(at instanceof Object)){at={url:at}}if(at&&at.url){at.id=ar;return X.createSound(at).play()}else{return false}}X.sounds[ar].play(at)};this.start=this.play;this.setPosition=function(ar,at){if(!G(ar)){return false}X.sounds[ar].setPosition(at)};this.stop=function(ar){if(!G(ar)){return false}X.sounds[ar].stop()};this.stopAll=function(){for(var ar in X.sounds){if(X.sounds[ar] instanceof w){X.sounds[ar].stop()}}};this.pause=function(ar){if(!G(ar)){return false}X.sounds[ar].pause()};this.pauseAll=function(){for(var ar=X.soundIDs.length;ar--;){X.sounds[X.soundIDs[ar]].pause()}};this.resume=function(ar){if(!G(ar)){return false}X.sounds[ar].resume()};this.resumeAll=function(){for(var ar=X.soundIDs.length;ar--;){X.sounds[X.soundIDs[ar]].resume()}};this.togglePause=function(ar){if(!G(ar)){return false}X.sounds[ar].togglePause()};this.setPan=function(ar,at){if(!G(ar)){return false}X.sounds[ar].setPan(at)};this.setVolume=function(at,ar){if(!G(at)){return false}X.sounds[at].setVolume(ar)};this.mute=function(ar){var au="soundManager.mute(): ",at=0;if(typeof ar!=="string"){ar=null}if(!ar){for(at=X.soundIDs.length;at--;){X.sounds[X.soundIDs[at]].mute()}X.muted=true}else{if(!G(ar)){return false}X.sounds[ar].mute()}};this.muteAll=function(){X.mute()};this.unmute=function(ar){var au="soundManager.unmute(): ",at;if(typeof ar!=="string"){ar=null}if(!ar){for(at=X.soundIDs.length;at--;){X.sounds[X.soundIDs[at]].unmute()}X.muted=false}else{if(!G(ar)){return false}X.sounds[ar].unmute()}};this.unmuteAll=function(){X.unmute()};this.toggleMute=function(ar){if(!G(ar)){return false}X.sounds[ar].toggleMute()};this.getMemoryUse=function(){if(X.flashVersion===8){return 0}if(X.o){return parseInt(X.o._getMemoryUse(),10)}};this.disable=function(at){if(typeof at==="undefined"){at=false}if(k){return false}k=true;for(var ar=X.soundIDs.length;ar--;){f(X.sounds[X.soundIDs[ar]])}t(at)};this.canPlayMIME=function(ar){return(ar?(ar.match(X.mimePattern)?true:false):null)};this.canPlayURL=function(ar){return(ar?(ar.match(X.filePattern)?true:false):null)};this.canPlayLink=function(ar){if(typeof ar.type!=="undefined"&&ar.type){if(X.canPlayMIME(ar.type)){return true}}return X.canPlayURL(ar.href)};this.getSoundById=function(at,au){if(!at){throw new Error("SoundManager.getSoundById(): sID is null/undefined")}var ar=X.sounds[at];if(!ar&&!au){}return ar};this.onready=function(at,ar){if(at&&at instanceof Function){if(r){}if(!ar){ar=c}al(at,ar);K();return true}else{throw Q("needFunction")}};this.oninitmovie=function(){};this.onload=function(){};this.onerror=function(){};this.getMoviePercent=function(){return(X.o&&typeof X.o.PercentLoaded!=="undefined"?X.o.PercentLoaded():null)};this._writeDebug=function(ar,au,at){};this._wD=this._writeDebug;this._debug=function(){};this.reboot=function(){if(X.soundIDs.length){}for(var ar=X.soundIDs.length;ar--;){X.sounds[X.soundIDs[ar]].destruct()}try{if(X.isIE){s=X.o.innerHTML}I=X.o.parentNode.removeChild(X.o)}catch(at){}s=null;I=null;X.enabled=false;r=false;af=false;ad=false;e=false;am=false;k=false;X.swfLoaded=false;X.soundIDs={};X.sounds=[];X.o=null;for(ar=P.length;ar--;){P[ar].fired=false}c.setTimeout(function(){X.beginDelayedInit()},20)};this.destruct=function(){X.disable(true)};this.beginDelayedInit=function(){i=true;setTimeout(j,500);setTimeout(D,20)};ao={};T=function(ar){return document.getElementById(ar)};an=0;Q=function(){var aw=Array.prototype.slice.call(arguments),av=aw.shift(),au=(ao&&ao[av]?ao[av]:""),at,ar;if(au&&aw&&aw.length){for(at=0,ar=aw.length;at<ar;at++){au=au.replace("%s",aw[at])}}return au};aq=function(ar){if(X.flashVersion===8&&ar.loops>1&&ar.stream){ar.stream=false}return ar};W=function(au,av){var at="Error: ",ar;if(!av){return new Error(at+au)}if(typeof console!=="undefined"&&typeof console.trace!=="undefined"){console.trace()}ar=at+au+". \nCaller: "+av.toString();return new Error(ar)};v=function(){return false};f=function(at){for(var ar in at){if(at.hasOwnProperty(ar)&&typeof at[ar]==="function"){at[ar]=v}}ar=null};B=function(ar){if(typeof ar==="undefined"){ar=false}if(k||ar){X.disable(ar)}};l=function(ar){var at=null;if(ar){if(ar.match(/\.swf(\?\.*)?$/i)){at=ar.substr(ar.toLowerCase().lastIndexOf(".swf?")+4);if(at){return ar}}else{if(ar.lastIndexOf("/")!==ar.length-1){ar=ar+"/"}}}return(ar&&ar.lastIndexOf("/")!==-1?ar.substr(0,ar.lastIndexOf("/")+1):"./")+X.movieURL};L=function(){if(X.flashVersion!==8&&X.flashVersion!==9){alert(Q("badFV",X.flashVersion,O));X.flashVersion=O}X.version=X.versionNumber+(X.flashVersion===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(X.flashVersion>8){X.defaultOptions=J(X.defaultOptions,X.flash9Options);X.features.buffering=true}if(X.flashVersion>8&&X.useMovieStar){X.defaultOptions=J(X.defaultOptions,X.movieStarOptions);X.filePatterns.flash9=new RegExp("\\.(mp3|"+X.netStreamTypes.join("|")+")(\\?.*)?$","i");X.mimePattern=X.netStreamMimeTypes;X.features.movieStar=true}else{X.useMovieStar=false;X.features.movieStar=false}X.filePattern=X.filePatterns[(X.flashVersion!==8?"flash9":"flash8")];X.movieURL=(X.flashVersion===8?"soundmanager2.swf":"soundmanager2_flash9.swf");X.features.peakData=X.features.waveformData=X.features.eqData=(X.flashVersion>8)};n=function(){return(document.body?document.body:(document.documentElement?document.documentElement:document.getElementsByTagName("div")[0]))};M=function(ar,at){if(!X.o||!X.allowPolling){return false}X.o._setPolling(ar,at)};function C(){}R=function(aF,au){var az=null,aE=(au?au:X.url),ay=(X.altURL?X.altURL:aE),aH,av,aC,aI,aA,ax,aB,aw,at,aJ,ar="100%";aF=(typeof aF==="undefined"?X.id:aF);function aD(){}if(Z){aD();ak();return false}if(e&&am){return false}e=true;L();X.url=l(ap?aE:ay);au=X.url;if(X.useHighPerformance&&X.useMovieStar&&X.defaultOptions.useVideo===true){az="soundManager note: disabling highPerformance, not applicable with movieStar mode+useVideo";X.useHighPerformance=false}X.wmode=(!X.wmode&&X.useHighPerformance&&!X.useMovieStar?"transparent":X.wmode);if(X.wmode!==null&&!X.isIE&&!X.useHighPerformance&&navigator.platform.match(/win32/i)){X.specialWmodeCase=true;X.wmode=null}if(X.flashVersion===8){X.allowFullScreen=false}aH={name:aF,id:aF,src:au,width:ar,height:ar,quality:"high",allowScriptAccess:X.allowScriptAccess,bgcolor:X.bgColor,pluginspage:"http://www.macromedia.com/go/getflashplayer",type:"application/x-shockwave-flash",wmode:X.wmode,allowfullscreen:(X.allowFullScreen?"true":"false")};if(X.debugFlash){aH.FlashVars="debug=1"}if(!X.wmode){delete aH.wmode}if(X.isIE){av=document.createElement("div");aA='<object id="'+aF+'" data="'+au+'" type="'+aH.type+'" width="'+aH.width+'" height="'+aH.height+'"><param name="movie" value="'+au+'" /><param name="AllowScriptAccess" value="'+X.allowScriptAccess+'" /><param name="quality" value="'+aH.quality+'" />'+(X.wmode?'<param name="wmode" value="'+X.wmode+'" /> ':"")+'<param name="bgcolor" value="'+X.bgColor+'" /><param name="allowFullScreen" value="'+aH.allowFullScreen+'" />'+(X.debugFlash?'<param name="FlashVars" value="'+aH.FlashVars+'" />':"")+"<!-- --></object>"}else{av=document.createElement("embed");for(aI in aH){if(aH.hasOwnProperty(aI)){av.setAttribute(aI,aH[aI])}}}C();aB=ae();aC=n();if(aC){X.oMC=T(X.movieID)?T(X.movieID):document.createElement("div");if(!X.oMC.id){X.oMC.id=X.movieID;X.oMC.className=X.swfCSS.swfDefault+" "+aB;aw=null;ax=null;if(!X.useFlashBlock){if(X.useHighPerformance){aw={position:"fixed",width:"6px",height:"6px",bottom:"0px",left:"0px",overflow:"hidden"}}else{aw={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"}}}at=null;if(!X.debugFlash){for(at in aw){if(aw.hasOwnProperty(at)){X.oMC.style[at]=aw[at]}}}try{if(!X.isIE){X.oMC.appendChild(av)}aC.appendChild(X.oMC);if(X.isIE){ax=X.oMC.appendChild(document.createElement("div"));ax.className="sm2-object-box";ax.innerHTML=aA}am=true}catch(aG){throw new Error(Q("appXHTML"))}}else{aJ=X.oMC.className;X.oMC.className=(aJ?aJ+" ":X.swfCSS.swfDefault)+(aB?" "+aB:"");X.oMC.appendChild(av);if(X.isIE){ax=X.oMC.appendChild(document.createElement("div"));ax.className="sm2-object-box";ax.innerHTML=aA}am=true}}if(az){}aD()};G=this.getSoundById;J=function(at,ar){var aw={},au,av,ax;for(au in at){if(at.hasOwnProperty(au)){aw[au]=at[au]}}av=(typeof ar==="undefined"?X.defaultOptions:ar);for(ax in av){if(av.hasOwnProperty(ax)&&typeof aw[ax]==="undefined"){aw[ax]=av[ax]}}return aw};U=function(){if(Z){L();C();R();return false}if(X.o){return false}X.o=X.getMovie(X.id);if(!X.o){if(!I){R(X.id,X.url)}else{if(!X.isIE){X.oMC.appendChild(I)}else{X.oMC.innerHTML=s}I=null;e=true}X.o=X.getMovie(X.id)}if(X.o){}if(typeof X.oninitmovie==="function"){setTimeout(X.oninitmovie,1)}};p=function(ar){if(ar){X.url=ar}U()};j=function(){if(af){return false}af=true;if(ah&&!F){return false}var ar;if(!r){ar=X.getMoviePercent()}setTimeout(function(){ar=X.getMoviePercent();if(!r){if(!ap&&ar){if(!X.debugFlash){}}if(ar===0){}}if(!r&&z){if(ar===null){if(X.useFlashBlock||X.flashLoadTimeout===0){if(X.useFlashBlock){V()}}else{B(true)}}else{if(X.flashLoadTimeout===0){}else{B(true)}}}},X.flashLoadTimeout)};ae=function(){var ar=[];if(X.debugMode){ar.push(X.swfCSS.sm2Debug)}if(X.debugFlash){ar.push(X.swfCSS.flashDebug)}if(X.useHighPerformance){ar.push(X.swfCSS.highPerf)}return ar.join(" ")};V=function(){var ar="soundManager::flashBlockHandler()",at=X.getMoviePercent();if(!X.supported()){X.oMC.className=ae()+" "+X.swfCSS.swfDefault+" "+(at===null?X.swfCSS.swfTimedout:X.swfCSS.swfError);K(true);if(X.onerror instanceof Function){X.onerror.apply(c)}X.didFlashBlock=true}else{if(X.didFlashBlock){}X.oMC.className=ae()+" "+X.swfCSS.swfDefault+(" "+X.swfCSS.swfUnblocked)}};A=function(){if(F||!ah){return true}z=true;F=true;if(ah){c.removeEventListener("mousemove",A,false)}af=false;setTimeout(j,500);if(c.removeEventListener){c.removeEventListener("focus",A,false)}else{if(c.detachEvent){c.detachEvent("onfocus",A)}}};t=function(at){if(r){return false}if(Z){r=true;K();return true}var au=X.oMC.className,ar=(X.useFlashBlock&&X.flashLoadTimeout&&!X.getMoviePercent());if(!ar){r=true}if(k||at){if(X.useFlashBlock){X.oMC.className=ae()+" "+(X.getMoviePercent()===null?X.swfCSS.swfTimedout:X.swfCSS.swfError)}K();if(X.onerror instanceof Function){X.onerror.apply(c)}return false}else{}if(X.waitForWindowLoad&&!i){if(c.addEventListener){c.addEventListener("load",u,false)}else{if(c.attachEvent){c.attachEvent("onload",u)}}return false}else{if(X.waitForWindowLoad&&i){}u()}};al=function(at,ar){P.push({method:at,scope:(ar||null),fired:false})};K=function(ax){if(!r&&!ax){return false}var at={success:(ax?X.supported():!k)},ar=[],aw,av,au=(!X.useFlashBlock||(X.useFlashBlock&&!X.supported()));for(aw=0,av=P.length;aw<av;aw++){if(P[aw].fired!==true){ar.push(P[aw])}}if(ar.length){for(aw=0,av=ar.length;aw<av;aw++){if(ar[aw].scope){ar[aw].method.apply(ar[aw].scope,[at])}else{ar[aw].method(at)}if(!au){ar[aw].fired=true}}}};u=function(){c.setTimeout(function(){if(X.useFlashBlock){V()}K();X.onload.apply(c)},1)};d=function(){var at,ar;if(X.useHTML5Audio){if(!X.html5||!X.html5.canPlayType){X.hasHTML5=false;return true}else{X.hasHTML5=true}}else{return true}for(ar in X.requiredFormats){if(X.requiredFormats.hasOwnProperty(ar)){if(X.requiredFormats[ar]&&!X.html5.canPlayType(ar)){at=true}}}Z=(X.useHTML5Audio&&X.hasHTML5&&!at);return at};o=d();ak=function(){function ar(){if(c.removeEventListener){c.removeEventListener("load",X.beginDelayedInit,false)}else{if(c.detachEvent){c.detachEvent("onload",X.beginDelayedInit)}}}if(Z){ar();X.enabled=true;t();return true}U();if(r){return false}ar();try{X.o._externalInterfaceTest(false);if(!X.allowPolling){}else{M(true,X.useFastPolling?true:false)}if(!X.debugMode){X.o._disableDebug()}X.enabled=true}catch(at){B(true);t();return false}t()};D=function(){if(ad){return false}R();U();ad=true;return true};S=function(){ac=true;if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",S,false)}if(X.useHTML5Audio&&X.hasHTML5){if(H){p()}}else{p()}};ab=function(){var at,ar=0,au=null;for(at=X.soundIDs.length;at--;){au=X.sounds[X.soundIDs[at]];ar+=(au._onTimer()===true?1:0)}if(!ar){c.clearInterval(x);x=null}};ai=function(ar){if(!ar._hasTimer){ar._hasTimer=true}if(!x){x=c.setInterval(ab,X.useFastPolling?33:100)}};q=function(ar){if(ar._hasTimer){ar._hasTimer=false}};this._setSandboxType=function(ar){var at=X.sandbox;at.type=ar;at.description=at.types[(typeof at.types[ar]!=="undefined"?ar:"unknown")];if(at.type==="localWithFile"){at.noRemote=true;at.noLocal=false}else{if(at.type==="localWithNetwork"){at.noRemote=false;at.noLocal=true}else{if(at.type==="localTrusted"){at.noRemote=false;at.noLocal=false}}}};this._externalInterfaceOK=function(ar){if(X.swfLoaded){return false}var at=new Date().getTime();X.swfLoaded=true;ah=false;if(X.isIE){setTimeout(ak,100)}else{ak()}};this._onfullscreenchange=function(ar){X.isFullScreen=(ar===1?true:false);if(!X.isFullScreen){try{c.focus()}catch(at){}}};w=function(at){var aw=this,ay,au,av,ar,ax;this.sID=at.id;this.url=at.url;this.options=J(at);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this._lastURL=null;this.useHTML5=false;this.id3={};this._debug=function(){};this._debug();this.load=function(az){var aA=null;if(typeof az!=="undefined"){aw._iO=J(az);aw.instanceOptions=aw._iO}else{az=aw.options;aw._iO=az;aw.instanceOptions=aw._iO;if(aw._lastURL&&aw._lastURL!==aw.url){aw._iO.url=aw.url;aw.url=null}}if(typeof aw._iO.url==="undefined"){aw._iO.url=aw.url}if(aw._iO.url===aw.url&&aw.readyState!==0&&aw.readyState!==2){return false}aw.url=aw._iO.url;aw._lastURL=aw._iO.url;aw.loaded=false;aw.readyState=1;aw.playState=0;aw._iO=aq(aw._iO);try{if(N(aw._iO.url)){aA=aw._setup_html5({url:aw._iO.url});if(aw._iO.autoPlay){aw.play()}}else{if(X.flashVersion===8){X.o._load(aw.sID,aw._iO.url,aw._iO.stream,aw._iO.autoPlay,(aw._iO.whileloading?1:0),aw._iO.loops||1)}else{X.o._load(aw.sID,aw._iO.url,aw._iO.stream?true:false,aw._iO.autoPlay?true:false,aw._iO.loops||1);if(aw._iO.isMovieStar&&aw._iO.autoLoad&&!aw._iO.autoPlay){aw.pause()}}}}catch(aB){X.onerror();X.disable()}};this.unload=function(){if(aw.readyState!==0){if(aw.readyState!==2){aw.setPosition(0,true)}if(!aw.useHTML5){X.o._unload(aw.sID,X.nullURL)}else{av();if(aw.__element){aw.__element.pause();aw.__element.src="about:blank";aw.__element.load();aw.__element=null}}ay()}};this.destruct=function(){if(!aw.useHTML5){X.o._destroySound(aw.sID)}else{av();if(aw.__element){aw.__element.pause();aw.__element.src="about:blank";aw.__element.load();aw.__element=null}}X.destroySound(aw.sID,true)};this.play=function(aA){var aB="SMSound.play(): ",az;if(!aA){aA={}}aw._iO=J(aA,aw._iO);aw._iO=J(aw._iO,aw.options);aw.instanceOptions=aw._iO;if(N(aw._iO.url)){aw._setup_html5({url:aw._iO.url});ar()}if(aw.playState===1){az=aw._iO.multiShot;if(!az){return false}else{if(aw.useHTML5){aw.setPosition(aw._iO.position)}}}if(!aw.loaded){if(aw.readyState===0){aw._iO.autoPlay=true;aw.load(aw._iO)}else{if(aw.readyState===2){return false}else{}}}else{}if(aw.paused){aw.resume()}else{if(aw.useHTML5&&aw.playState===1){return true}aw.playState=1;if(!aw.instanceCount||(X.flashVersion>8&&!aw.useHTML5)){aw.instanceCount++}aw.position=(typeof aw._iO.position!=="undefined"&&!isNaN(aw._iO.position)?aw._iO.position:0);aw._iO=aq(aw._iO);if(aw._iO.onplay){aw._iO.onplay.apply(aw)}aw.setVolume(aw._iO.volume,true);aw.setPan(aw._iO.pan,true);if(!aw.useHTML5){X.o._start(aw.sID,aw._iO.loop||1,(X.flashVersion===9?aw.position:aw.position/1000))}else{ar();aw._setup_html5().play()}}};this.start=this.play;this.stop=function(az){if(aw.playState===1){aw._onbufferchange(0);aw.playState=0;aw.paused=false;if(aw._iO.onstop){aw._iO.onstop.apply(aw)}if(!aw.useHTML5){X.o._stop(aw.sID,az)}else{if(aw.__element){aw.__element.pause();aw.setPosition(0);ab();av()}}aw.instanceCount=0;aw._iO={}}};this.setPosition=function(aA,az){if(typeof aA==="undefined"){aA=0}var aB=Math.min(aw.duration,Math.max(aA,0));aw._iO.position=aB;if(!az){}if(!aw.useHTML5){X.o._setPosition(aw.sID,(X.flashVersion===9?aw._iO.position:aw._iO.position/1000),(aw.paused||!aw.playState))}else{if(aw.__element){if(aw.playState){aw.__element.currentTime=aw._iO.position/1000}else{}if(aw.paused){ab(true)}}}};this.pause=function(){if(aw.paused||aw.playState===0){return false}aw.paused=true;if(!aw.useHTML5){X.o._pause(aw.sID)}else{aw._setup_html5().pause();av()}if(aw._iO.onpause){aw._iO.onpause.apply(aw)}};this.resume=function(){if(!aw.paused||aw.playState===0){return false}aw.paused=false;if(!aw.useHTML5){X.o._pause(aw.sID)}else{aw._setup_html5().play();ar()}if(aw._iO.onresume){aw._iO.onresume.apply(aw)}};this.togglePause=function(){if(aw.playState===0){aw.play({position:(X.flashVersion===9&&!aw.useHTML5?aw.position:aw.position/1000)});return false}if(aw.paused){aw.resume()}else{aw.pause()}};this.setPan=function(aA,az){if(typeof aA==="undefined"){aA=0}if(typeof az==="undefined"){az=false}if(!aw.useHTML5){X.o._setPan(aw.sID,aA)}else{}aw._iO.pan=aA;if(!az){aw.pan=aA}};this.setVolume=function(az,aA){if(typeof az==="undefined"){az=100}if(typeof aA==="undefined"){aA=false}if(!aw.useHTML5){X.o._setVolume(aw.sID,(X.muted&&!aw.muted)||aw.muted?0:az)}else{if(aw.__element){aw.__element.volume=az/100}}aw._iO.volume=az;if(!aA){aw.volume=az}};this.mute=function(){aw.muted=true;if(!aw.useHTML5){X.o._setVolume(aw.sID,0)}else{if(aw.__element){aw.__element.muted=true}}};this.unmute=function(){aw.muted=false;var az=typeof aw._iO.volume!=="undefined";if(!aw.useHTML5){X.o._setVolume(aw.sID,az?aw._iO.volume:aw.options.volume)}else{if(aw.__element){aw.__element.muted=false}}};this.toggleMute=function(){if(aw.muted){aw.unmute()}else{aw.mute()}};this._onTimer=function(az){if(aw._hasTimer||az){var aA,aB;if(aw.__element&&(az||((aw.playState>0||aw.readyState===1)&&!aw.paused))){aB=aw.__element;aw.duration=ax();aw.durationEstimate=aw.duration;aA=aB.currentTime?aB.currentTime*1000:0;aw._whileplaying(aA,{},{},{},{});return true}else{return false}}};ax=function(){var az=(aw.__element?aw.__element.duration*1000:undefined);if(az){return(!isNaN(az)?az:null)}};ar=function(){if(aw.useHTML5){ai(aw)}};av=function(){if(aw.useHTML5){q(aw)}};ay=function(az){aw._hasTimer=null;aw._added_events=null;aw.__element=null;aw.bytesLoaded=null;aw.bytesTotal=null;aw.position=null;aw.duration=null;aw.durationEstimate=null;aw.loaded=false;aw.playState=0;aw.paused=false;aw.readyState=0;aw.muted=false;aw.didBeforeFinish=false;aw.didJustBeforeFinish=false;aw.isBuffering=false;aw.instanceOptions={};aw.instanceCount=0;aw.peakData={left:0,right:0};aw.waveformData={left:[],right:[]};aw.eqData=[];aw.eqData.left=[];aw.eqData.right=[]};ay();this._setup_html5=function(aA){var az=J(aw._iO,aA);if(aw.__element){if(aw.__element.src!==az.url){aw.__element.src=az.url}return aw.__element}aw.__element=new Audio(az.url);aw.useHTML5=true;au();return aw.__element};au=function(){if(aw._added_events){return false}aw._added_events=true;aw.__element.addEventListener("load",function(az){var aA=aw.__element;if(aA){aw._onbufferchange(0);aw._whileloading(aw.bytesTotal,aw.bytesTotal,ax());aw._onload(1)}},false);aw.__element.addEventListener("canplay",function(az){aw._onbufferchange(0)},false);aw.__element.addEventListener("waiting",function(az){aw._onbufferchange(1)},false);aw.__element.addEventListener("progress",function(az){var aA=aw.__element;if(!aw.loaded&&aA){aw._onbufferchange(0);aw._whileloading(az.loaded||0,az.total||1,ax())}},false);aw.__element.addEventListener("end",function(az){aw._onfinish()},false);aw.__element.addEventListener("error",function(az){if(aw.__element){aw._onload(0)}},false);aw.__element.addEventListener("empty",function(az){},false);aw.__element.addEventListener("loadstart",function(az){aw._onbufferchange(1)},false);aw.__element.addEventListener("play",function(az){aw._onbufferchange(0)},false);aw.__element.addEventListener("playing",function(az){aw._onbufferchange(0)},false);setTimeout(function(){if(aw&&aw.__element){aw.__element.addEventListener("ended",function(az){aw._onfinish()},false)}},250)};this._whileloading=function(az,aA,aB){if(!aw._iO.isMovieStar){aw.bytesLoaded=az;aw.bytesTotal=aA;aw.duration=Math.floor(aB);aw.durationEstimate=parseInt((aw.bytesTotal/aw.bytesLoaded)*aw.duration,10);if(aw.durationEstimate===undefined){aw.durationEstimate=aw.duration}if(aw.readyState!==3&&aw._iO.whileloading){aw._iO.whileloading.apply(aw)}}else{aw.bytesLoaded=az;aw.bytesTotal=aA;aw.duration=Math.floor(aB);aw.durationEstimate=aw.duration;if(aw.readyState!==3&&aw._iO.whileloading){aw._iO.whileloading.apply(aw)}}};this._onid3=function(aC,az){var aD=[],aB,aA;for(aB=0,aA=aC.length;aB<aA;aB++){aD[aC[aB]]=az[aB]}aw.id3=J(aw.id3,aD);if(aw._iO.onid3){aw._iO.onid3.apply(aw)}};this._whileplaying=function(aB,aC,aE,aA,aD){if(isNaN(aB)||aB===null){return false}if(aw.playState===0&&aB>0){aB=0}aw.position=aB;if(X.flashVersion>8&&!aw.useHTML5){if(aw._iO.usePeakData&&typeof aC!=="undefined"&&aC){aw.peakData={left:aC.leftPeak,right:aC.rightPeak}}if(aw._iO.useWaveformData&&typeof aE!=="undefined"&&aE){aw.waveformData={left:aE.split(","),right:aA.split(",")}}if(aw._iO.useEQData){if(typeof aD!=="undefined"&&aD&&aD.leftEQ){var az=aD.leftEQ.split(",");aw.eqData=az;aw.eqData.left=az;if(typeof aD.rightEQ!=="undefined"&&aD.rightEQ){aw.eqData.right=aD.rightEQ.split(",")}}}}if(aw.playState===1){if(!aw.useHTML5&&aw.isBuffering){aw._onbufferchange(0)}if(aw._iO.whileplaying){aw._iO.whileplaying.apply(aw)}if(aw.loaded&&aw._iO.onbeforefinish&&aw._iO.onbeforefinishtime&&!aw.didBeforeFinish&&aw.duration-aw.position<=aw._iO.onbeforefinishtime){aw._onbeforefinish()}}};this._onload=function(aA){var az="SMSound._onload(): ";aA=(aA===1?true:false);aw.loaded=aA;aw.readyState=aA?3:2;if(aw._iO.onload){aw._iO.onload.apply(aw)}};this._onbeforefinish=function(){if(!aw.didBeforeFinish){aw.didBeforeFinish=true;if(aw._iO.onbeforefinish){aw._iO.onbeforefinish.apply(aw)}}};this._onjustbeforefinish=function(az){if(!aw.didJustBeforeFinish){aw.didJustBeforeFinish=true;if(aw._iO.onjustbeforefinish){aw._iO.onjustbeforefinish.apply(aw)}}};this._onfinish=function(){aw._onbufferchange(0);if(aw._iO.onbeforefinishcomplete){aw._iO.onbeforefinishcomplete.apply(aw)}aw.didBeforeFinish=false;aw.didJustBeforeFinish=false;if(aw.instanceCount){aw.instanceCount--;if(!aw.instanceCount){aw.playState=0;aw.paused=false;aw.instanceCount=0;aw.instanceOptions={};av()}if(!aw.instanceCount||aw._iO.multiShotEvents){if(aw._iO.onfinish){aw._iO.onfinish.apply(aw)}}}};this._onmetadata=function(aA){var az="SMSound.onmetadata()";if(!aA.width&&!aA.height){aA.width=320;aA.height=240}aw.metadata=aA;aw.width=aA.width;aw.height=aA.height;if(aw._iO.onmetadata){aw._iO.onmetadata.apply(aw)}};this._onbufferchange=function(az){var aA="SMSound._onbufferchange()";if(aw.playState===0){return false}if((az&&aw.isBuffering)||(!az&&!aw.isBuffering)){return false}aw.isBuffering=(az===1?true:false);if(aw._iO.onbufferchange){aw._iO.onbufferchange.apply(aw)}};this._ondataerror=function(az){if(aw.playState>0){if(aw._iO.ondataerror){aw._iO.ondataerror.apply(aw)}}}};if(!X.hasHTML5||o){if(c.addEventListener){c.addEventListener("focus",A,false);c.addEventListener("load",X.beginDelayedInit,false);c.addEventListener("unload",X.destruct,false);if(ah){c.addEventListener("mousemove",A,false)}}else{if(c.attachEvent){c.attachEvent("onfocus",A);c.attachEvent("onload",X.beginDelayedInit);c.attachEvent("unload",X.destruct)}else{b.onerror();b.disable()}}}if(document.addEventListener){document.addEventListener("DOMContentLoaded",S,false)}}if(typeof SM2_DEFER==="undefined"||!SM2_DEFER){b=new a()}c.SoundManager=a;c.soundManager=b}(window));