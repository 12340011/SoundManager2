/*
   SoundManager 2: Javascript Sound for the Web
   --------------------------------------------
   http://schillmania.com/projects/soundmanager2/

   Copyright (c) 2007, Scott Schiller. All rights reserved.
   Code provided under the BSD License:
   http://schillmania.com/projects/soundmanager2/license.txt

   V2.95b.20100323+DEV
*/
(function(c){var b=null;function a(ah,h){this.flashVersion=8;this.debugMode=false;this.debugFlash=false;this.useConsole=true;this.consoleOnly=false;this.waitForWindowLoad=false;this.nullURL="null.mp3";this.allowPolling=true;this.useFastPolling=false;this.useMovieStar=false;this.bgColor="#ffffff";this.useHighPerformance=false;this.flashLoadTimeout=1000;this.wmode=null;this.allowFullScreen=true;this.allowScriptAccess="always";this.useFlashBlock=false;this.useHTML5Audio=true;this.requiredFormats={"audio/mpeg":true,"audio/aac":false};this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5000,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:true,multiShotEvents:false,position:null,pan:0,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={onmetadata:null,useVideo:false,bufferTime:3};this.version=null;this.versionNumber="V2.95b.20100323+DEV";this.movieURL=null;this.url=(ah||null);this.altURL=null;this.swfLoaded=false;this.enabled=false;this.o=null;this.movieID="sm2-container";this.id=(h||"sm2movie");this.swfCSS={swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.isFullScreen=false;this.isIE=(navigator.userAgent.match(/MSIE/i));this.isSafari=(navigator.userAgent.match(/safari/i));this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.specialWmodeCase=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?\.*)?$/i,flash9:/\.mp3(\?\.*)?$/i};this.baseMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"];this.netStreamPattern=new RegExp("\\.("+this.netStreamTypes.join("|")+")(\\?.*)?$","i");this.mimePattern=this.baseMimeTypes;this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.hasHTML5=null;var w,W=this,y="soundManager",S,v,ai,O=[],g=true,Z,e=false,ak=false,r=false,k=false,i=false,m,al,t,I,aj,J,u,p,j,K,A,D,am,T,R,n,Q,L,ae=["log","info","warn","error"],N=8,f,B,l,H=null,s=null,P,U,ac,E,ao,V,G,ad=false,ab=false,x,aa,ag,q,o,d,Y,M,X=(typeof console!=="undefined"&&typeof console.log!=="undefined"),an=(document.location?document.location.protocol.match(/http/i):null),F=(typeof document.hasFocus!=="undefined"?document.hasFocus():null),af=(typeof document.hasFocus==="undefined"&&this.isSafari),z=!af;(function(){var ap=(typeof Audio!=="undefined"?new Audio("about:blank"):null);function aq(ar){var at=(ap&&typeof ap.canPlayType==="function"?ap.canPlayType(ar).toLowerCase():false);return(at&&(at==="probably"||at==="maybe"))}W.html5={canPlayType:(ap?aq:null),mp3:aq("audio/mpeg"),aac:aq("audio/aac"),ogg:aq("audio/ogg")}}());M=function(ar){if(!W.hasHTML5){return false}var at={mp3:"audio/mpeg",aac:"audio/mpeg"},aq,ap=ar.match(/\.(aac|mp3|mp4|ogg)/i);if(!ap||!ap.length){return false}else{ap=ap[0].substr(1)}if(ap&&at[ap]){aq=at[ap]}else{aq="audio/"+ap}return W.html5.canPlayType(aq)};this.useAltURL=!an;this.supported=function(){return(W.hasHTML5||(r&&!k))};this.getMovie=function(ap){return W.isIE?c[ap]:(W.isSafari?S(ap)||document[ap]:S(ap))};this.loadFromXML=function(ap){try{W.o._loadFromXML(ap)}catch(aq){B();return true}};this.createSound=function(aq){var at="soundManager.createSound(): ",ar=null,ap=null;if(!r){throw V(at+P("notReady"),arguments.callee.caller)}if(arguments.length===2){aq={id:arguments[0],url:arguments[1]}}ar=I(aq);ap=ar;if(G(ap.id,true)){return W.sounds[ap.id]}if(W.flashVersion>8&&W.useMovieStar){if(ap.isMovieStar===null){ap.isMovieStar=(ap.url.match(W.netStreamPattern)?true:false)}if(ap.isMovieStar){}if(ap.isMovieStar&&ap.usePeakData){ap.usePeakData=false}}ar=ao(ar);W.sounds[ap.id]=new w(ap);W.soundIDs.push(ap.id);if(M(ap.url)){W.sounds[ap.id]._setup_html5({url:ap.url})}else{if(W.flashVersion===8){W.o._createSound(ap.id,ap.onjustbeforefinishtime,ap.loops||1)}else{W.o._createSound(ap.id,ap.url,ap.onjustbeforefinishtime,ap.usePeakData,ap.useWaveformData,ap.useEQData,ap.isMovieStar,(ap.isMovieStar?ap.useVideo:false),(ap.isMovieStar?ap.bufferTime:false),ap.loops||1)}}if(ap.autoLoad||ap.autoPlay){if(W.sounds[ap.id]){W.sounds[ap.id].load(ap)}}if(ap.autoPlay){W.sounds[ap.id].play()}return W.sounds[ap.id]};this.createVideo=function(ap){var aq="soundManager.createVideo(): ";if(arguments.length===2){ap={id:arguments[0],url:arguments[1]}}if(W.flashVersion>=9){ap.isMovieStar=true;ap.useVideo=true}else{return false}if(!W.useMovieStar){}return W.createSound(ap)};this.destroySound=function(aq,ap){if(!G(aq)){return false}for(var ar=0;ar<W.soundIDs.length;ar++){if(W.soundIDs[ar]===aq){W.soundIDs.splice(ar,1);continue}}W.sounds[aq].unload();if(!ap){W.sounds[aq].destruct()}delete W.sounds[aq]};this.destroyVideo=this.destroySound;this.load=function(ap,aq){if(!G(ap)){return false}W.sounds[ap].load(aq)};this.unload=function(ap){if(!G(ap)){return false}W.sounds[ap].unload()};this.play=function(ap,aq){var ar="soundManager.play(): ";if(!r){throw V(ar+P("notReady"),arguments.callee.caller)}if(!G(ap)){if(!(aq instanceof Object)){aq={url:aq}}if(aq&&aq.url){aq.id=ap;return W.createSound(aq).play()}else{return false}}W.sounds[ap].play(aq)};this.start=this.play;this.setPosition=function(ap,aq){if(!G(ap)){return false}W.sounds[ap].setPosition(aq)};this.stop=function(ap){if(!G(ap)){return false}W.sounds[ap].stop()};this.stopAll=function(){for(var ap in W.sounds){if(W.sounds[ap] instanceof w){W.sounds[ap].stop()}}};this.pause=function(ap){if(!G(ap)){return false}W.sounds[ap].pause()};this.pauseAll=function(){for(var ap=W.soundIDs.length;ap--;){W.sounds[W.soundIDs[ap]].pause()}};this.resume=function(ap){if(!G(ap)){return false}W.sounds[ap].resume()};this.resumeAll=function(){for(var ap=W.soundIDs.length;ap--;){W.sounds[W.soundIDs[ap]].resume()}};this.togglePause=function(ap){if(!G(ap)){return false}W.sounds[ap].togglePause()};this.setPan=function(ap,aq){if(!G(ap)){return false}W.sounds[ap].setPan(aq)};this.setVolume=function(aq,ap){if(!G(aq)){return false}W.sounds[aq].setVolume(ap)};this.mute=function(ap){var ar="soundManager.mute(): ",aq=0;if(typeof ap!=="string"){ap=null}if(!ap){for(aq=W.soundIDs.length;aq--;){W.sounds[W.soundIDs[aq]].mute()}W.muted=true}else{if(!G(ap)){return false}W.sounds[ap].mute()}};this.muteAll=function(){W.mute()};this.unmute=function(ap){var ar="soundManager.unmute(): ",aq;if(typeof ap!=="string"){ap=null}if(!ap){for(aq=W.soundIDs.length;aq--;){W.sounds[W.soundIDs[aq]].unmute()}W.muted=false}else{if(!G(ap)){return false}W.sounds[ap].unmute()}};this.unmuteAll=function(){W.unmute()};this.toggleMute=function(ap){if(!G(ap)){return false}W.sounds[ap].toggleMute()};this.getMemoryUse=function(){if(W.flashVersion===8){return 0}if(W.o){return parseInt(W.o._getMemoryUse(),10)}};this.disable=function(aq){if(typeof aq==="undefined"){aq=false}if(k){return false}k=true;for(var ap=W.soundIDs.length;ap--;){f(W.sounds[W.soundIDs[ap]])}t(aq)};this.canPlayMIME=function(ap){return(ap?(ap.match(W.mimePattern)?true:false):null)};this.canPlayURL=function(ap){return(ap?(ap.match(W.filePattern)?true:false):null)};this.canPlayLink=function(ap){if(typeof ap.type!=="undefined"&&ap.type){if(W.canPlayMIME(ap.type)){return true}}return W.canPlayURL(ap.href)};this.getSoundById=function(aq,ar){if(!aq){throw new Error("SoundManager.getSoundById(): sID is null/undefined")}var ap=W.sounds[aq];if(!ap&&!ar){}return ap};this.onready=function(aq,ap){if(aq&&aq instanceof Function){if(r){}if(!ap){ap=c}aj(aq,ap);J();return true}else{throw P("needFunction")}};this.oninitmovie=function(){};this.onload=function(){};this.onerror=function(){};this.getMoviePercent=function(){return(W.o&&typeof W.o.PercentLoaded!=="undefined"?W.o.PercentLoaded():null)};this._writeDebug=function(ap,ar,aq){};this._wD=this._writeDebug;this._debug=function(){};this.reboot=function(){if(W.soundIDs.length){}for(var ap=W.soundIDs.length;ap--;){W.sounds[W.soundIDs[ap]].destruct()}try{if(W.isIE){s=W.o.innerHTML}H=W.o.parentNode.removeChild(W.o)}catch(aq){}s=null;H=null;W.enabled=false;r=false;ad=false;ab=false;e=false;ak=false;k=false;W.swfLoaded=false;W.soundIDs={};W.sounds=[];W.o=null;for(ap=O.length;ap--;){O[ap].fired=false}c.setTimeout(function(){d();W.beginDelayedInit()},20)};this.destruct=function(){W.disable(true)};this.beginDelayedInit=function(){i=true;setTimeout(j,500);setTimeout(D,20)};am={};S=function(ap){return document.getElementById(ap)};al=0;P=function(){var au=Array.prototype.slice.call(arguments),at=au.shift(),ar=(am&&am[at]?am[at]:""),aq,ap;if(ar&&au&&au.length){for(aq=0,ap=au.length;aq<ap;aq++){ar=ar.replace("%s",au[aq])}}return ar};ao=function(ap){if(W.flashVersion===8&&ap.loops>1&&ap.stream){ap.stream=false}return ap};V=function(ar,at){var aq="Error: ",ap;if(!at){return new Error(aq+ar)}if(typeof console!=="undefined"&&typeof console.trace!=="undefined"){console.trace()}ap=aq+ar+". \nCaller: "+at.toString();return new Error(ap)};v=function(){return false};f=function(aq){for(var ap in aq){if(aq.hasOwnProperty(ap)&&typeof aq[ap]==="function"){aq[ap]=v}}ap=null};B=function(ap){if(typeof ap==="undefined"){ap=false}if(k||ap){W.disable(ap)}};l=function(ap){var aq=null;if(ap){if(ap.match(/\.swf(\?\.*)?$/i)){aq=ap.substr(ap.toLowerCase().lastIndexOf(".swf?")+4);if(aq){return ap}}else{if(ap.lastIndexOf("/")!==ap.length-1){ap=ap+"/"}}}return(ap&&ap.lastIndexOf("/")!==-1?ap.substr(0,ap.lastIndexOf("/")+1):"./")+W.movieURL};K=function(){if(W.flashVersion!==8&&W.flashVersion!==9){alert(P("badFV",W.flashVersion,N));W.flashVersion=N}W.version=W.versionNumber+(W.flashVersion===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(W.flashVersion>8){W.defaultOptions=I(W.defaultOptions,W.flash9Options);W.features.buffering=true}if(W.flashVersion>8&&W.useMovieStar){W.defaultOptions=I(W.defaultOptions,W.movieStarOptions);W.filePatterns.flash9=new RegExp("\\.(mp3|"+W.netStreamTypes.join("|")+")(\\?.*)?$","i");W.mimePattern=W.netStreamMimeTypes;W.features.movieStar=true}else{W.useMovieStar=false;W.features.movieStar=false}W.filePattern=W.filePatterns[(W.flashVersion!==8?"flash9":"flash8")];W.movieURL=(W.flashVersion===8?"soundmanager2.swf":"soundmanager2_flash9.swf");W.features.peakData=W.features.waveformData=W.features.eqData=(W.flashVersion>8)};n=function(){return(document.body?document.body:(document.documentElement?document.documentElement:document.getElementsByTagName("div")[0]))};L=function(ap,aq){if(!W.o||!W.allowPolling){return false}W.o._setPolling(ap,aq)};function C(){}Q=function(aD,ar){var ax=null,aC=(ar?ar:W.url),aw=(W.altURL?W.altURL:aC),aF,at,aA,aG,ay,av,az,au,aq,aH,ap="100%";aD=(typeof aD==="undefined"?W.id:aD);function aB(){}if(Y){aB();ai();return false}if(e&&ak){return false}e=true;K();W.url=l(an?aC:aw);ar=W.url;if(W.useHighPerformance&&W.useMovieStar&&W.defaultOptions.useVideo===true){ax="soundManager note: disabling highPerformance, not applicable with movieStar mode+useVideo";W.useHighPerformance=false}W.wmode=(!W.wmode&&W.useHighPerformance&&!W.useMovieStar?"transparent":W.wmode);if(W.wmode!==null&&!W.isIE&&!W.useHighPerformance&&navigator.platform.match(/win32/i)){W.specialWmodeCase=true;W.wmode=null}if(W.flashVersion===8){W.allowFullScreen=false}aF={name:aD,id:aD,src:ar,width:ap,height:ap,quality:"high",allowScriptAccess:W.allowScriptAccess,bgcolor:W.bgColor,pluginspage:"http://www.macromedia.com/go/getflashplayer",type:"application/x-shockwave-flash",wmode:W.wmode,allowfullscreen:(W.allowFullScreen?"true":"false")};if(W.debugFlash){aF.FlashVars="debug=1"}if(!W.wmode){delete aF.wmode}if(W.isIE){at=document.createElement("div");ay='<object id="'+aD+'" data="'+ar+'" type="'+aF.type+'" width="'+aF.width+'" height="'+aF.height+'"><param name="movie" value="'+ar+'" /><param name="AllowScriptAccess" value="'+W.allowScriptAccess+'" /><param name="quality" value="'+aF.quality+'" />'+(W.wmode?'<param name="wmode" value="'+W.wmode+'" /> ':"")+'<param name="bgcolor" value="'+W.bgColor+'" /><param name="allowFullScreen" value="'+aF.allowFullScreen+'" />'+(W.debugFlash?'<param name="FlashVars" value="'+aF.FlashVars+'" />':"")+"<!-- --></object>"}else{at=document.createElement("embed");for(aG in aF){if(aF.hasOwnProperty(aG)){at.setAttribute(aG,aF[aG])}}}C();az=ac();aA=n();if(aA){W.oMC=S(W.movieID)?S(W.movieID):document.createElement("div");if(!W.oMC.id){W.oMC.id=W.movieID;W.oMC.className=W.swfCSS.swfDefault+" "+az;au=null;av=null;if(!W.useFlashBlock){if(W.useHighPerformance){au={position:"fixed",width:"6px",height:"6px",bottom:"0px",left:"0px",overflow:"hidden"}}else{au={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"}}}aq=null;if(!W.debugFlash){for(aq in au){if(au.hasOwnProperty(aq)){W.oMC.style[aq]=au[aq]}}}try{if(!W.isIE){W.oMC.appendChild(at)}aA.appendChild(W.oMC);if(W.isIE){av=W.oMC.appendChild(document.createElement("div"));av.className="sm2-object-box";av.innerHTML=ay}ak=true}catch(aE){throw new Error(P("appXHTML"))}}else{aH=W.oMC.className;W.oMC.className=(aH?aH+" ":W.swfCSS.swfDefault)+(az?" "+az:"");W.oMC.appendChild(at);if(W.isIE){av=W.oMC.appendChild(document.createElement("div"));av.className="sm2-object-box";av.innerHTML=ay}ak=true}}if(ax){}aB()};G=this.getSoundById;I=function(aq,ap){var au={},ar,at,av;for(ar in aq){if(aq.hasOwnProperty(ar)){au[ar]=aq[ar]}}at=(typeof ap==="undefined"?W.defaultOptions:ap);for(av in at){if(at.hasOwnProperty(av)&&typeof au[av]==="undefined"){au[av]=at[av]}}return au};T=function(){if(Y){K();C();Q();return false}if(W.o){return false}W.o=W.getMovie(W.id);if(!W.o){if(!H){Q(W.id,W.url)}else{if(!W.isIE){W.oMC.appendChild(H)}else{W.oMC.innerHTML=s}H=null;e=true}W.o=W.getMovie(W.id)}if(W.o){}if(typeof W.oninitmovie==="function"){setTimeout(W.oninitmovie,1)}};p=function(ap){if(ap){W.url=ap}T()};j=function(){if(ad){return false}ad=true;if(af&&!F){return false}var ap;if(!r){ap=W.getMoviePercent()}setTimeout(function(){ap=W.getMoviePercent();if(!r){if(!an&&ap){if(!W.debugFlash){}}if(ap===0){}}if(!r&&z){if(ap===null){if(W.useFlashBlock||W.flashLoadTimeout===0){if(W.useFlashBlock){U()}}else{B(true)}}else{if(W.flashLoadTimeout===0){}else{B(true)}}}},W.flashLoadTimeout)};ac=function(){var ap=[];if(W.debugMode){ap.push(W.swfCSS.sm2Debug)}if(W.debugFlash){ap.push(W.swfCSS.flashDebug)}if(W.useHighPerformance){ap.push(W.swfCSS.highPerf)}return ap.join(" ")};U=function(){var ap="soundManager::flashBlockHandler()",aq=W.getMoviePercent();if(!W.supported()){W.oMC.className=ac()+" "+W.swfCSS.swfDefault+" "+(aq===null?W.swfCSS.swfTimedout:W.swfCSS.swfError);J(true);if(W.onerror instanceof Function){W.onerror.apply(c)}W.didFlashBlock=true}else{if(W.didFlashBlock){}W.oMC.className=ac()+" "+W.swfCSS.swfDefault+(" "+W.swfCSS.swfUnblocked)}};A=function(){if(F||!af){return true}z=true;F=true;if(af){c.removeEventListener("mousemove",A,false)}ad=false;setTimeout(j,500);if(c.removeEventListener){c.removeEventListener("focus",A,false)}else{if(c.detachEvent){c.detachEvent("onfocus",A)}}};t=function(aq){if(r){return false}if(Y){r=true;J();return true}var ar=W.oMC.className,ap=(W.useFlashBlock&&W.flashLoadTimeout&&!W.getMoviePercent());if(!ap){r=true}if(k||aq){if(W.useFlashBlock){W.oMC.className=ac()+" "+(W.getMoviePercent()===null?W.swfCSS.swfTimedout:W.swfCSS.swfError)}J();if(W.onerror instanceof Function){W.onerror.apply(c)}return false}else{}if(W.waitForWindowLoad&&!i){if(c.addEventListener){c.addEventListener("load",u,false)}else{if(c.attachEvent){c.attachEvent("onload",u)}}return false}else{if(W.waitForWindowLoad&&i){}u()}};aj=function(aq,ap){O.push({method:aq,scope:(ap||null),fired:false})};J=function(av){if(!r&&!av){return false}var aq={success:(av?W.supported():!k)},ap=[],au,at,ar=(!W.useFlashBlock||(W.useFlashBlock&&!W.supported()));for(au=0,at=O.length;au<at;au++){if(O[au].fired!==true){ap.push(O[au])}}if(ap.length){for(au=0,at=ap.length;au<at;au++){if(ap[au].scope){ap[au].method.apply(ap[au].scope,[aq])}else{ap[au].method(aq)}if(!ar){ap[au].fired=true}}}};u=function(){c.setTimeout(function(){if(W.useFlashBlock){U()}J();W.onload.apply(c)})};d=function(){var aq=null,ap;if(W.useHTML5Audio){if(!W.html5.canPlayType){W.hasHTML5=false}else{W.hasHTML5=true}}if(!W.hasHTML5){aq=false}else{for(ap in W.requiredFormats){if(W.requiredFormats.hasOwnProperty(ap)){if(W.requiredFormats[ap]&&!W.html5.canPlayType(ap)){aq=true}}}}Y=(W.hasHTML5&&!aq);return aq};o=d();ai=function(){function ap(){if(c.removeEventListener){c.removeEventListener("load",W.beginDelayedInit,false)}else{if(c.detachEvent){c.detachEvent("onload",W.beginDelayedInit)}}}if(Y){ap();W.enabled=true;t();return true}T();if(r){return false}ap();try{W.o._externalInterfaceTest(false);if(!W.allowPolling){}else{L(true,W.useFastPolling?true:false)}if(!W.debugMode){W.o._disableDebug()}W.enabled=true}catch(aq){B(true);t();return false}t()};D=function(){if(ab){return false}Q();T();ab=true;return true};R=function(){if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",R,false)}p()};aa=function(){var aq,ap=0,ar=null;for(aq=W.soundIDs.length;aq--;){ar=W.sounds[W.soundIDs[aq]];ap+=(ar._onTimer()===true?1:0)}if(!ap){c.clearInterval(x);x=null}};ag=function(ap){if(!ap._hasTimer){ap._hasTimer=true}if(!x){x=c.setInterval(aa,W.useFastPolling?33:100)}};q=function(ap){if(ap._hasTimer){ap._hasTimer=false}};this._setSandboxType=function(ap){var aq=W.sandbox;aq.type=ap;aq.description=aq.types[(typeof aq.types[ap]!=="undefined"?ap:"unknown")];if(aq.type==="localWithFile"){aq.noRemote=true;aq.noLocal=false}else{if(aq.type==="localWithNetwork"){aq.noRemote=false;aq.noLocal=true}else{if(aq.type==="localTrusted"){aq.noRemote=false;aq.noLocal=false}}}};this._externalInterfaceOK=function(ap){if(W.swfLoaded){return false}var aq=new Date().getTime();W.swfLoaded=true;af=false;if(W.isIE){setTimeout(ai,100)}else{ai()}};this._onfullscreenchange=function(ap){W.isFullScreen=(ap===1?true:false);if(!W.isFullScreen){try{c.focus()}catch(aq){}}};w=function(aq){var au=this,av,ar,at,ap;this.sID=aq.id;this.url=aq.url;this.options=I(aq);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this._lastURL=null;this.useHTML5=false;this.id3={};this._debug=function(){};this._debug();this.load=function(aw){var ax=null;if(typeof aw!=="undefined"){au._iO=I(aw);au.instanceOptions=au._iO}else{aw=au.options;au._iO=aw;au.instanceOptions=au._iO;if(au._lastURL&&au._lastURL!==au.url){au._iO.url=au.url;au.url=null}}if(typeof au._iO.url==="undefined"){au._iO.url=au.url}if(au._iO.url===au.url&&au.readyState!==0&&au.readyState!==2){return false}au.url=au._iO.url;au._lastURL=au._iO.url;au.loaded=false;au.readyState=1;au.playState=0;au._iO=ao(au._iO);try{if(M(au._iO.url)){ax=au._setup_html5({url:au._iO.url});ax.load();if(au._iO.autoPlay){au.play()}}else{if(W.flashVersion===8){W.o._load(au.sID,au._iO.url,au._iO.stream,au._iO.autoPlay,(au._iO.whileloading?1:0),au._iO.loops||1)}else{W.o._load(au.sID,au._iO.url,au._iO.stream?true:false,au._iO.autoPlay?true:false,au._iO.loops||1);if(au._iO.isMovieStar&&au._iO.autoLoad&&!au._iO.autoPlay){au.pause()}}}}catch(ay){W.onerror();W.disable()}};this.unload=function(){if(au.readyState!==0){if(au.readyState!==2){au.setPosition(0,true)}if(!au.useHTML5){W.o._unload(au.sID,W.nullURL)}else{at();if(au.__element){au.__element.pause();au.__element=null}}av()}};this.destruct=function(){if(!au.useHTML5){W.o._destroySound(au.sID)}else{at();if(au.__element){au.__element.pause();au.__element=null;au._added_events=false}}W.destroySound(au.sID,true)};this.play=function(ax){var ay="SMSound.play(): ",aw;if(!ax){ax={}}au._iO=I(ax,au._iO);au._iO=I(au._iO,au.options);au.instanceOptions=au._iO;if(M(au._iO.url)){au._setup_html5({url:au._iO.url});ap()}if(au.playState===1){aw=au._iO.multiShot;if(!aw){return false}else{if(au.useHTML5){au.setPosition(au._iO.position)}}}if(!au.loaded){if(au.readyState===0){au._iO.autoPlay=true;au.load(au._iO)}else{if(au.readyState===2){return false}else{}}}else{}if(au.paused){au.resume()}else{if(au.useHTML5&&au.playState===1){return true}au.playState=1;if(!au.instanceCount||(W.flashVersion>8&&!au.useHTML5)){au.instanceCount++}au.position=(typeof au._iO.position!=="undefined"&&!isNaN(au._iO.position)?au._iO.position:0);au._iO=ao(au._iO);if(au._iO.onplay){au._iO.onplay.apply(au)}au.setVolume(au._iO.volume,true);au.setPan(au._iO.pan,true);if(!au.useHTML5){W.o._start(au.sID,au._iO.loop||1,(W.flashVersion===9?au.position:au.position/1000))}else{ap();au._setup_html5().play()}}};this.start=this.play;this.stop=function(aw){if(au.playState===1){au.playState=0;au.paused=false;if(au._iO.onstop){au._iO.onstop.apply(au)}if(!au.useHTML5){W.o._stop(au.sID,aw)}else{if(au.__element){au.__element.pause();au.setPosition(0);aa();at()}}au.instanceCount=0;au._iO={}}};this.setPosition=function(ax,aw){if(typeof ax==="undefined"){ax=0}var ay=Math.min(au.duration,Math.max(ax,0));au._iO.position=ay;if(!aw){}if(!au.useHTML5){W.o._setPosition(au.sID,(W.flashVersion===9?au._iO.position:au._iO.position/1000),(au.paused||!au.playState))}else{if(au.__element){if(au.playState){au.__element.currentTime=au._iO.position/1000}else{}if(au.paused){aa(true)}}}};this.pause=function(){if(au.paused||au.playState===0){return false}au.paused=true;if(!au.useHTML5){W.o._pause(au.sID)}else{au._setup_html5().pause();at()}if(au._iO.onpause){au._iO.onpause.apply(au)}};this.resume=function(){if(!au.paused||au.playState===0){return false}au.paused=false;if(!au.useHTML5){W.o._pause(au.sID)}else{au._setup_html5().play();ap()}if(au._iO.onresume){au._iO.onresume.apply(au)}};this.togglePause=function(){if(au.playState===0){au.play({position:(W.flashVersion===9&&!au.useHTML5?au.position:au.position/1000)});return false}if(au.paused){au.resume()}else{au.pause()}};this.setPan=function(ax,aw){if(typeof ax==="undefined"){ax=0}if(typeof aw==="undefined"){aw=false}if(!au.useHTML5){W.o._setPan(au.sID,ax)}else{}au._iO.pan=ax;if(!aw){au.pan=ax}};this.setVolume=function(aw,ax){if(typeof aw==="undefined"){aw=100}if(typeof ax==="undefined"){ax=false}if(!au.useHTML5){W.o._setVolume(au.sID,(W.muted&&!au.muted)||au.muted?0:aw)}else{if(au.__element){au.__element.volume=au.muted?0:(aw/100)}}au._iO.volume=aw;if(!ax){au.volume=aw}};this.mute=function(){au.muted=true;if(!au.useHTML5){W.o._setVolume(au.sID,0)}else{au.setVolume(0,false)}};this.unmute=function(){au.muted=false;var aw=typeof au._iO.volume!=="undefined";if(!au.useHTML5){W.o._setVolume(au.sID,aw?au._iO.volume:au.options.volume)}else{au.setVolume((aw?au._iO.volume:au.options.volume))}};this.toggleMute=function(){if(au.muted){au.unmute()}else{au.mute()}};this._onTimer=function(aw){if(au._hasTimer||aw){var ax;if(au.__element&&(aw||((au.playState>0||au.readyState===1)&&!au.paused))){au.duration=((au.__element.duration*1000)||null);au.durationEstimate=au.duration;ax=((au.__element.currentTime?au.__element.currentTime*1000:0)||(au.__element.buffered&&au.__element.buffered.length?au.__element.buffered.end(0):0));au._whileplaying(ax,{},{},{},{});return true}else{return false}}};ap=function(){if(au.useHTML5){ag(au)}};at=function(){if(au.useHTML5){q(au)}};av=function(aw){au._hasTimer=null;au._added_events=null;au.__element=null;au.bytesLoaded=null;au.bytesTotal=null;au.position=null;au.duration=null;au.durationEstimate=null;au.loaded=false;au.playState=0;au.paused=false;au.readyState=0;au.muted=false;au.didBeforeFinish=false;au.didJustBeforeFinish=false;au.isBuffering=false;au.instanceOptions={};au.instanceCount=0;au.peakData={left:0,right:0};au.waveformData={left:[],right:[]};au.eqData=[];au.eqData.left=[];au.eqData.right=[]};av();this._setup_html5=function(ax){if(au.__element){return au.__element}var aw=I(au._iO,ax);au.__element=new Audio(aw.url);au.useHTML5=true;ar();return au.__element};ar=function(){if(au._added_events){return false}au._added_events=true;au.__element.addEventListener("load",function(aw){if(au.__element){au._whileloading(au.bytesTotal,au.bytesTotal,((au.__element.duration*1000)||undefined));au._onload(1)}},false);au.__element.addEventListener("progress",function(aw){if(!au.loaded&&au.__element){au._whileloading(aw.loaded||0,aw.total||1,((au.__element.duration*1000)||undefined))}},false);au.__element.addEventListener("end",function(aw){au._onfinish()},false);au.__element.addEventListener("error",function(aw){},false);au.__element.addEventListener("empty",function(aw){},false);au.__element.addEventListener("loadstart",function(aw){au._onbufferchange(1)},false);au.__element.addEventListener("play",function(aw){au._onbufferchange(0)},false);setTimeout(function(){if(au&&au.__element){au.__element.addEventListener("ended",function(aw){au._onfinish()},false)}},250)};this._whileloading=function(aw,ax,ay){if(!au._iO.isMovieStar){au.bytesLoaded=aw;au.bytesTotal=ax;au.duration=Math.floor(ay);au.durationEstimate=parseInt((au.bytesTotal/au.bytesLoaded)*au.duration,10);if(au.durationEstimate===undefined){au.durationEstimate=au.duration}if(au.readyState!==3&&au._iO.whileloading){au._iO.whileloading.apply(au)}}else{au.bytesLoaded=aw;au.bytesTotal=ax;au.duration=Math.floor(ay);au.durationEstimate=au.duration;if(au.readyState!==3&&au._iO.whileloading){au._iO.whileloading.apply(au)}}};this._onid3=function(az,aw){var aA=[],ay,ax;for(ay=0,ax=az.length;ay<ax;ay++){aA[az[ay]]=aw[ay]}au.id3=I(au.id3,aA);if(au._iO.onid3){au._iO.onid3.apply(au)}};this._whileplaying=function(ay,az,aB,ax,aA){if(isNaN(ay)||ay===null){return false}if(au.playState===0&&ay>0){ay=0}au.position=ay;if(W.flashVersion>8&&!au.useHTML5){if(au._iO.usePeakData&&typeof az!=="undefined"&&az){au.peakData={left:az.leftPeak,right:az.rightPeak}}if(au._iO.useWaveformData&&typeof aB!=="undefined"&&aB){au.waveformData={left:aB.split(","),right:ax.split(",")}}if(au._iO.useEQData){if(typeof aA!=="undefined"&&aA&&aA.leftEQ){var aw=aA.leftEQ.split(",");au.eqData=aw;au.eqData.left=aw;if(typeof aA.rightEQ!=="undefined"&&aA.rightEQ){au.eqData.right=aA.rightEQ.split(",")}}}}if(au.playState===1){if(au.isBuffering){au._onbufferchange(0)}if(au._iO.whileplaying){au._iO.whileplaying.apply(au)}if(au.loaded&&au._iO.onbeforefinish&&au._iO.onbeforefinishtime&&!au.didBeforeFinish&&au.duration-au.position<=au._iO.onbeforefinishtime){au._onbeforefinish()}}};this._onload=function(ax){var aw="SMSound._onload(): ";ax=(ax===1?true:false);if(!ax&&!au.useHTML5){if(W.sandbox.noRemote===true){}if(W.sandbox.noLocal===true){}}au.loaded=ax;au.readyState=ax?3:2;if(au._iO.onload){au._iO.onload.apply(au)}};this._onbeforefinish=function(){if(!au.didBeforeFinish){au.didBeforeFinish=true;if(au._iO.onbeforefinish){au._iO.onbeforefinish.apply(au)}}};this._onjustbeforefinish=function(aw){if(!au.didJustBeforeFinish){au.didJustBeforeFinish=true;if(au._iO.onjustbeforefinish){au._iO.onjustbeforefinish.apply(au)}}};this._onfinish=function(){if(au._iO.onbeforefinishcomplete){au._iO.onbeforefinishcomplete.apply(au)}au.didBeforeFinish=false;au.didJustBeforeFinish=false;if(au.instanceCount){au.instanceCount--;if(!au.instanceCount){au.playState=0;au.paused=false;au.instanceCount=0;au.instanceOptions={};at()}if(!au.instanceCount||au._iO.multiShotEvents){if(au._iO.onfinish){au._iO.onfinish.apply(au)}}}else{if(au.useVideo){}}};this._onmetadata=function(ax){var aw="SMSound.onmetadata()";if(!ax.width&&!ax.height){ax.width=320;ax.height=240}au.metadata=ax;au.width=ax.width;au.height=ax.height;if(au._iO.onmetadata){au._iO.onmetadata.apply(au)}};this._onbufferchange=function(ax){var aw="SMSound._onbufferchange()";if(au.playState===0){return false}if(ax===au.isBuffering){return false}au.isBuffering=(ax===1?true:false);if(au._iO.onbufferchange){au._iO.onbufferchange.apply(au)}};this._ondataerror=function(aw){if(au.playState>0){if(au._iO.ondataerror){au._iO.ondataerror.apply(au)}}else{}}};if(!W.hasHTML5||o){if(c.addEventListener){c.addEventListener("focus",A,false);c.addEventListener("load",W.beginDelayedInit,false);c.addEventListener("unload",W.destruct,false);if(af){c.addEventListener("mousemove",A,false)}}else{if(c.attachEvent){c.attachEvent("onfocus",A);c.attachEvent("onload",W.beginDelayedInit);c.attachEvent("unload",W.destruct)}else{b.onerror();b.disable()}}}if(document.addEventListener){document.addEventListener("DOMContentLoaded",R,false)}}if(typeof SM2_DEFER==="undefined"||!SM2_DEFER){b=new a()}c.SoundManager=a;c.soundManager=b}(window));