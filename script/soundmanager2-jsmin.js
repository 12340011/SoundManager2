/*
   SoundManager 2: Javascript Sound for the Web
   --------------------------------------------
   http://schillmania.com/projects/soundmanager2/

   Copyright (c) 2007, Scott Schiller. All rights reserved.
   Code provided under the BSD License:
   http://schillmania.com/projects/soundmanager2/license.txt

   V2.95b.20100323+DEV
*/
(function(c){var b=null;function a(ac,g){this.flashVersion=8;this.debugMode=true;this.debugFlash=false;this.useConsole=true;this.consoleOnly=false;this.waitForWindowLoad=false;this.nullURL="null.mp3";this.allowPolling=true;this.useFastPolling=false;this.useMovieStar=false;this.bgColor="#ffffff";this.useHighPerformance=false;this.flashLoadTimeout=1000;this.wmode=null;this.allowFullScreen=true;this.allowScriptAccess="always";this.useFlashBlock=false;this.enableHTML5Audio=true;this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5000,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:true,multiShotEvents:false,position:null,pan:0,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={onmetadata:null,useVideo:false,bufferTime:3};this.version=null;this.versionNumber="V2.95b.20100323+DEV";this.movieURL=null;this.url=(ac||null);this.altURL=null;this.swfLoaded=false;this.enabled=false;this.o=null;this.movieID="sm2-container";this.id=(g||"sm2movie");this.swfCSS={swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.isFullScreen=false;this.isIE=(navigator.userAgent.match(/MSIE/i));this.isSafari=(navigator.userAgent.match(/safari/i));this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.specialWmodeCase=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?\.*)?$/i,flash9:/\.mp3(\?\.*)?$/i};this.baseMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"];this.netStreamPattern=new RegExp("\\.("+this.netStreamTypes.join("|")+")(\\?.*)?$","i");this.mimePattern=this.baseMimeTypes;this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};var u,S=this,w="soundManager",O,t,ad,K=[],f=true,U,d=false,af=false,p=false,j=false,h=false,l,ag,r,F,ae,G,s,n,i,H,y,A,ah,P,N,m,M,I,Z=["log","info","warn","error"],J=8,e,z,k,E=null,q=null,L,Q,X,B,aj,R,D,Y=false,W=false,v,V,ab,o,T=(typeof console!=="undefined"&&typeof console.log!=="undefined"),ai=(document.location?document.location.protocol.match(/http/i):null),C=(typeof document.hasFocus!=="undefined"?document.hasFocus():null),aa=(typeof document.hasFocus==="undefined"&&this.isSafari),x=!aa;(function(){var ak=(typeof Audio!=="undefined"?new Audio("about:blank"):null);function al(am){return(ak&&typeof ak.canPlayType==="function"&&ak.canPlayType(am)!==""&&ak.canPlayType(am)!=="no")}S.html5_audio_capabilities={canPlayType:(typeof ak.canPlayType!=="undefined"),mp3:al("audio/mpeg"),aac:al("audio/aac"),ogg:al("audio/ogg")};ak=null}());this.useAltURL=!ai;this.supported=function(){return(p&&!j)};this.getMovie=function(ak){return S.isIE?c[ak]:(S.isSafari?O(ak)||document[ak]:O(ak))};this.loadFromXML=function(ak){try{S.o._loadFromXML(ak)}catch(al){z();return true}};this.createSound=function(al){var an="soundManager.createSound(): ",am=null,ak=null;if(!p){throw R(an+L("notReady"),arguments.callee.caller)}if(arguments.length===2){al={id:arguments[0],url:arguments[1]}}am=F(al);ak=am;if(ak.id.toString().charAt(0).match(/^[0-9]$/)){S._wD(an+L("badID",ak.id),2)}S._wD(an+ak.id+" ("+ak.url+")",1);if(D(ak.id,true)){S._wD(an+ak.id+" exists",1);return S.sounds[ak.id]}if(S.flashVersion>8&&S.useMovieStar){if(ak.isMovieStar===null){ak.isMovieStar=(ak.url.match(S.netStreamPattern)?true:false)}if(ak.isMovieStar){S._wD(an+"using MovieStar handling")}if(ak.isMovieStar&&ak.usePeakData){l("noPeak");ak.usePeakData=false}}am=aj(am);S.sounds[ak.id]=new u(ak);S.soundIDs.push(ak.id);if(S.enableHTML5Audio){S._wD("Loading sound "+ak.id+" from HTML5");S.sounds[ak.id]._setup_html5({url:ak.url})}else{if(S.flashVersion===8){S.o._createSound(ak.id,ak.onjustbeforefinishtime,ak.loops||1)}else{S.o._createSound(ak.id,ak.url,ak.onjustbeforefinishtime,ak.usePeakData,ak.useWaveformData,ak.useEQData,ak.isMovieStar,(ak.isMovieStar?ak.useVideo:false),(ak.isMovieStar?ak.bufferTime:false),ak.loops||1)}}if(ak.autoLoad||ak.autoPlay){if(S.sounds[ak.id]){S.sounds[ak.id].load(ak)}}if(ak.autoPlay){S.sounds[ak.id].play()}return S.sounds[ak.id]};this.createVideo=function(ak){var al="soundManager.createVideo(): ";if(arguments.length===2){ak={id:arguments[0],url:arguments[1]}}if(S.flashVersion>=9){ak.isMovieStar=true;ak.useVideo=true}else{S._wD(al+L("f9Vid"),2);return false}if(!S.useMovieStar){S._wD(al+L("noMS"),2)}return S.createSound(ak)};this.destroySound=function(al,ak){if(!D(al)){return false}for(var am=0;am<S.soundIDs.length;am++){if(S.soundIDs[am]===al){S.soundIDs.splice(am,1);continue}}S.sounds[al].unload();if(!ak){S.sounds[al].destruct()}delete S.sounds[al]};this.destroyVideo=this.destroySound;this.load=function(ak,al){if(!D(ak)){return false}S.sounds[ak].load(al)};this.unload=function(ak){if(!D(ak)){return false}S.sounds[ak].unload()};this.play=function(ak,al){var am="soundManager.play(): ";if(!p){throw R(am+L("notReady"),arguments.callee.caller)}if(!D(ak)){if(!(al instanceof Object)){al={url:al}}if(al&&al.url){S._wD(am+'attempting to create "'+ak+'"',1);al.id=ak;return S.createSound(al).play()}else{return false}}S.sounds[ak].play(al)};this.start=this.play;this.setPosition=function(ak,al){if(!D(ak)){return false}S.sounds[ak].setPosition(al)};this.stop=function(ak){if(!D(ak)){return false}S._wD("soundManager.stop("+ak+")",1);S.sounds[ak].stop()};this.stopAll=function(){S._wD("soundManager.stopAll()",1);for(var ak in S.sounds){if(S.sounds[ak] instanceof u){S.sounds[ak].stop()}}};this.pause=function(ak){if(!D(ak)){return false}S.sounds[ak].pause()};this.pauseAll=function(){for(var ak=S.soundIDs.length;ak--;){S.sounds[S.soundIDs[ak]].pause()}};this.resume=function(ak){if(!D(ak)){return false}S.sounds[ak].resume()};this.resumeAll=function(){for(var ak=S.soundIDs.length;ak--;){S.sounds[S.soundIDs[ak]].resume()}};this.togglePause=function(ak){if(!D(ak)){return false}S.sounds[ak].togglePause()};this.setPan=function(ak,al){if(!D(ak)){return false}S.sounds[ak].setPan(al)};this.setVolume=function(al,ak){if(!D(al)){return false}S.sounds[al].setVolume(ak)};this.mute=function(ak){var am="soundManager.mute(): ",al=0;if(typeof ak!=="string"){ak=null}if(!ak){S._wD(am+"Muting all sounds");for(al=S.soundIDs.length;al--;){S.sounds[S.soundIDs[al]].mute()}S.muted=true}else{if(!D(ak)){return false}S._wD(am+'Muting "'+ak+'"');S.sounds[ak].mute()}};this.muteAll=function(){S.mute()};this.unmute=function(ak){var am="soundManager.unmute(): ",al;if(typeof ak!=="string"){ak=null}if(!ak){S._wD(am+"Unmuting all sounds");for(al=S.soundIDs.length;al--;){S.sounds[S.soundIDs[al]].unmute()}S.muted=false}else{if(!D(ak)){return false}S._wD(am+'Unmuting "'+ak+'"');S.sounds[ak].unmute()}};this.unmuteAll=function(){S.unmute()};this.toggleMute=function(ak){if(!D(ak)){return false}S.sounds[ak].toggleMute()};this.getMemoryUse=function(){if(S.flashVersion===8){return 0}if(S.o){return parseInt(S.o._getMemoryUse(),10)}};this.disable=function(al){if(typeof al==="undefined"){al=false}if(j){return false}j=true;l("shutdown",1);for(var ak=S.soundIDs.length;ak--;){e(S.sounds[S.soundIDs[ak]])}r(al)};this.canPlayMIME=function(ak){return(ak?(ak.match(S.mimePattern)?true:false):null)};this.canPlayURL=function(ak){return(ak?(ak.match(S.filePattern)?true:false):null)};this.canPlayLink=function(ak){if(typeof ak.type!=="undefined"&&ak.type){if(S.canPlayMIME(ak.type)){return true}}return S.canPlayURL(ak.href)};this.getSoundById=function(al,am){if(!al){throw new Error("SoundManager.getSoundById(): sID is null/undefined")}var ak=S.sounds[al];if(!ak&&!am){S._wD('"'+al+'" is an invalid sound ID.',2)}return ak};this.onready=function(al,ak){if(al&&al instanceof Function){if(p){l("queue")}if(!ak){ak=c}ae(al,ak);G();return true}else{throw L("needFunction")}};this.oninitmovie=function(){};this.onload=function(){S._wD("soundManager.onload()",1)};this.onerror=function(){};this.getMoviePercent=function(){return(S.o&&typeof S.o.PercentLoaded!=="undefined"?S.o.PercentLoaded():null)};this._writeDebug=function(al,ar,an){var aq="soundmanager-debug",ap,ao,ak;if(!S.debugMode){return false}if(typeof an!=="undefined"&&an){al=al+" | "+new Date().getTime()}if(T&&S.useConsole){ak=Z[ar];if(typeof console[ak]!=="undefined"){console[ak](al)}else{console.log(al)}if(S.useConsoleOnly){return true}}try{ap=O(aq);if(!ap){return false}ao=document.createElement("div");if(++ag%2===0){ao.className="sm2-alt"}if(typeof ar==="undefined"){ar=0}else{ar=parseInt(ar,10)}ao.appendChild(document.createTextNode(al));if(ar){if(ar>=2){ao.style.fontWeight="bold"}if(ar===3){ao.style.color="#ff3333"}}ap.insertBefore(ao,ap.firstChild)}catch(am){}ap=null};this._wD=this._writeDebug;this._debug=function(){l("currentObj",1);for(var al=0,ak=S.soundIDs.length;al<ak;al++){S.sounds[S.soundIDs[al]]._debug()}};this.reboot=function(){S._wD("soundManager.reboot()");if(S.soundIDs.length){S._wD("Destroying "+S.soundIDs.length+" SMSound objects...")}for(var ak=S.soundIDs.length;ak--;){S.sounds[S.soundIDs[ak]].destruct()}try{if(S.isIE){q=S.o.innerHTML}E=S.o.parentNode.removeChild(S.o);S._wD("Flash movie removed.")}catch(al){l("badRemove",2)}q=null;E=null;S.enabled=false;p=false;Y=false;W=false;d=false;af=false;j=false;S.swfLoaded=false;S.soundIDs={};S.sounds=[];S.o=null;for(ak=K.length;ak--;){K[ak].fired=false}S._wD(w+": Rebooting...");c.setTimeout(b.beginDelayedInit,20)};this.destruct=function(){S._wD("soundManager.destruct()");S.disable(true)};this.beginDelayedInit=function(){h=true;setTimeout(i,500);setTimeout(A,20)};ah={notReady:"Not loaded yet - wait for soundManager.onload() before calling sound-related methods",appXHTML:w+"::createMovie(): appendChild/innerHTML set failed. May be app/xhtml+xml DOM-related.",spcWmode:w+"::createMovie(): Removing wmode, preventing win32 below-the-fold SWF loading issue",swf404:w+": Verify that %s is a valid path.",tryDebug:"Try "+w+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:w+": Non-HTTP page ("+document.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:w+": Special case: Waiting for focus-related event..",waitImpatient:w+": Getting impatient, still waiting for Flash%s...",waitForever:w+": Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:w+".onready(): Function object expected",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',fl9Vid:"flash 9 required for video. Exiting.",noMS:"MovieStar mode not enabled. Exiting.",currentObj:"--- "+w+"._debug(): Current sound objects ---",waitEI:w+"::initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:w+": Waiting for window.onload()",docLoaded:w+": Document already loaded",onload:w+"::initComplete(): calling soundManager.onload()",onloadOK:w+".onload() complete",init:"-- "+w+"::init() --",didInit:w+"::init(): Already called?",flashJS:w+": Attempting to call Flash from JS..",noPolling:w+": Polling (whileloading()/whileplaying() support) is disabled.",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:w+".disable(): Shutting down",queue:w+".onready(): Queueing handler",smFail:w+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+S.swfCSS.swfTimedout+" CSS..",fbLoaded:"Flash loaded",manURL:"SMSound.load(): Using manually-assigned URL",onURL:w+".load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)"};O=function(ak){return document.getElementById(ak)};ag=0;L=function(){var ao=Array.prototype.slice.call(arguments),an=ao.shift(),am=(ah&&ah[an]?ah[an]:""),al,ak;if(am&&ao&&ao.length){for(al=0,ak=ao.length;al<ak;al++){am=am.replace("%s",ao[al])}}return am};aj=function(ak){if(S.flashVersion===8&&ak.loops>1&&ak.stream){l("as2loop");ak.stream=false}return ak};R=function(am,an){var al="Error: ",ak;if(!an){return new Error(al+am)}if(typeof console!=="undefined"&&typeof console.trace!=="undefined"){console.trace()}ak=al+am+". \nCaller: "+an.toString();return new Error(ak)};t=function(){return false};e=function(al){for(var ak in al){if(al.hasOwnProperty(ak)&&typeof al[ak]==="function"){al[ak]=t}}ak=null};z=function(ak){if(typeof ak==="undefined"){ak=false}if(j||ak){l("smFail",2);S.disable(ak)}};k=function(ak){var al=null;if(ak){if(ak.match(/\.swf(\?\.*)?$/i)){al=ak.substr(ak.toLowerCase().lastIndexOf(".swf?")+4);if(al){return ak}}else{if(ak.lastIndexOf("/")!==ak.length-1){ak=ak+"/"}}}return(ak&&ak.lastIndexOf("/")!==-1?ak.substr(0,ak.lastIndexOf("/")+1):"./")+S.movieURL};H=function(){if(S.flashVersion!==8&&S.flashVersion!==9){alert(L("badFV",S.flashVersion,J));S.flashVersion=J}S.version=S.versionNumber+(S.flashVersion===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(S.flashVersion>8){S.defaultOptions=F(S.defaultOptions,S.flash9Options);S.features.buffering=true}if(S.flashVersion>8&&S.useMovieStar){S.defaultOptions=F(S.defaultOptions,S.movieStarOptions);S.filePatterns.flash9=new RegExp("\\.(mp3|"+S.netStreamTypes.join("|")+")(\\?.*)?$","i");S.mimePattern=S.netStreamMimeTypes;S.features.movieStar=true}else{S.useMovieStar=false;S.features.movieStar=false}S.filePattern=S.filePatterns[(S.flashVersion!==8?"flash9":"flash8")];S.movieURL=(S.flashVersion===8?"soundmanager2.swf":"soundmanager2_flash9.swf");S.features.peakData=S.features.waveformData=S.features.eqData=(S.flashVersion>8)};m=function(){return(document.body?document.body:(document.documentElement?document.documentElement:document.getElementsByTagName("div")[0]))};I=function(ak,al){if(!S.o||!S.allowPolling){return false}S.o._setPolling(ak,al)};M=function(aB,aq){var aw=null,aA=(aq?aq:S.url),av=(S.altURL?S.altURL:aA),aE,ar,aD,ax,au,am,an,az,ay,at,ao,ap,aF,ak="100%";aB=(typeof aB==="undefined"?S.id:aB);if(S.debugURLParam.test(c.location.href.toString())){S.debugMode=true}if(d&&af){return false}d=true;H();S.url=k(ai?aA:av);aq=S.url;if(S.useHighPerformance&&S.useMovieStar&&S.defaultOptions.useVideo===true){aw="soundManager note: disabling highPerformance, not applicable with movieStar mode+useVideo";S.useHighPerformance=false}S.wmode=(!S.wmode&&S.useHighPerformance&&!S.useMovieStar?"transparent":S.wmode);if(S.wmode!==null&&!S.isIE&&!S.useHighPerformance&&navigator.platform.match(/win32/i)){S.specialWmodeCase=true;l("spcWmode");S.wmode=null}if(S.flashVersion===8){S.allowFullScreen=false}aE={name:aB,id:aB,src:aq,width:ak,height:ak,quality:"high",allowScriptAccess:S.allowScriptAccess,bgcolor:S.bgColor,pluginspage:"http://www.macromedia.com/go/getflashplayer",type:"application/x-shockwave-flash",wmode:S.wmode,allowfullscreen:(S.allowFullScreen?"true":"false")};if(S.debugFlash){aE.FlashVars="debug=1"}if(!S.wmode){delete aE.wmode}if(S.isIE){ar=document.createElement("div");ax='<object id="'+aB+'" data="'+aq+'" type="'+aE.type+'" width="'+aE.width+'" height="'+aE.height+'"><param name="movie" value="'+aq+'" /><param name="AllowScriptAccess" value="'+S.allowScriptAccess+'" /><param name="quality" value="'+aE.quality+'" />'+(S.wmode?'<param name="wmode" value="'+S.wmode+'" /> ':"")+'<param name="bgcolor" value="'+S.bgColor+'" /><param name="allowFullScreen" value="'+aE.allowFullScreen+'" />'+(S.debugFlash?'<param name="FlashVars" value="'+aE.FlashVars+'" />':"")+"<!-- --></object>"}else{ar=document.createElement("embed");for(aD in aE){if(aE.hasOwnProperty(aD)){ar.setAttribute(aD,aE[aD])}}}if(S.debugMode){am=document.createElement("div");am.id=S.debugID+"-toggle";an={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};am.appendChild(document.createTextNode("-"));am.onclick=B;am.title="Toggle SM2 debug console";if(navigator.userAgent.match(/msie 6/i)){am.style.position="absolute";am.style.cursor="hand"}for(aD in an){if(an.hasOwnProperty(aD)){am.style[aD]=an[aD]}}}ay=X();az=m();if(az){S.oMC=O(S.movieID)?O(S.movieID):document.createElement("div");if(!S.oMC.id){S.oMC.id=S.movieID;S.oMC.className=S.swfCSS.swfDefault+" "+ay;at=null;au=null;if(!S.useFlashBlock){if(S.useHighPerformance){at={position:"fixed",width:"6px",height:"6px",bottom:"0px",left:"0px",overflow:"hidden"}}else{at={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"}}}ao=null;if(!S.debugFlash){for(ao in at){if(at.hasOwnProperty(ao)){S.oMC.style[ao]=at[ao]}}}try{if(!S.isIE){S.oMC.appendChild(ar)}az.appendChild(S.oMC);if(S.isIE){au=S.oMC.appendChild(document.createElement("div"));au.className="sm2-object-box";au.innerHTML=ax}af=true}catch(aC){throw new Error(L("appXHTML"))}}else{aF=S.oMC.className;S.oMC.className=(aF?aF+" ":S.swfCSS.swfDefault)+(ay?" "+ay:"");S.oMC.appendChild(ar);if(S.isIE){au=S.oMC.appendChild(document.createElement("div"));au.className="sm2-object-box";au.innerHTML=ax}af=true}if(S.debugMode&&!O(S.debugID)&&((!T||!S.useConsole)||(S.useConsole&&T&&!S.consoleOnly))){ap=document.createElement("div");ap.id=S.debugID;ap.style.display=(S.debugMode?"block":"none");if(S.debugMode&&!O(am.id)){try{az.appendChild(am)}catch(al){throw new Error(L("appXHTML"))}az.appendChild(ap)}}az=null}if(S.enableHTML5Audio&&!S.html5_audio_capabilities.canPlayType){S._wD("SoundManager2: No HTML5 Audio().canPlayType() support detected.");S.enableHTML5Audio=false}if(aw){S._wD(aw)}S._wD("-- SoundManager 2 "+S.version+(S.enableHTML5Audio?", HTML5 audio enabled":"")+(S.useMovieStar?", MovieStar mode":"")+(S.useHighPerformance?", high performance mode, ":", ")+((S.useFastPolling?"fast":"normal")+" polling")+(S.wmode?", wmode: "+S.wmode:"")+(S.debugFlash?", flash debug mode":"")+(S.useFlashBlock?", flashBlock mode":"")+" --",1);S._wD("soundManager::createMovie(): Trying to load "+aq+(!ai&&S.altURL?" (alternate URL)":""),1)};D=this.getSoundById;l=function(al,ak){if(!al){return""}else{return S._wD(L(al),ak)}};if(c.location.href.indexOf("debug=alert")+1&&S.debugMode){S._wD=function(ak){alert(ak)}}B=function(){var al=O(S.debugID),ak=O(S.debugID+"-toggle");if(!al){return false}if(f){ak.innerHTML="+";al.style.display="none"}else{ak.innerHTML="-";al.style.display="block"}f=!f};U=function(an,ak,al){if(typeof sm2Debugger!=="undefined"){try{sm2Debugger.handleEvent(an,ak,al)}catch(am){}}};F=function(al,ak){var ao={},am,an,ap;for(am in al){if(al.hasOwnProperty(am)){ao[am]=al[am]}}an=(typeof ak==="undefined"?S.defaultOptions:ak);for(ap in an){if(an.hasOwnProperty(ap)&&typeof ao[ap]==="undefined"){ao[ap]=an[ap]}}return ao};P=function(){if(S.o){return false}S.o=S.getMovie(S.id);if(!S.o){if(!E){M(S.id,S.url)}else{if(!S.isIE){S.oMC.appendChild(E)}else{S.oMC.innerHTML=q}E=null;d=true}S.o=S.getMovie(S.id)}if(S.o){S._wD("soundManager::initMovie(): Got "+S.o.nodeName+" element ("+(d?"created via JS":"static HTML")+")",1);l("waitEI")}if(typeof S.oninitmovie==="function"){setTimeout(S.oninitmovie,1)}};n=function(ak){if(ak){S.url=ak}P()};i=function(){if(Y){return false}Y=true;if(aa&&!C){l("waitFocus");return false}var ak;if(!p){ak=S.getMoviePercent();S._wD(L("waitImpatient",(ak===100?" (SWF loaded)":(ak>0?" (SWF "+ak+"% loaded)":""))))}setTimeout(function(){ak=S.getMoviePercent();if(!p){S._wD(w+": No Flash response within expected time.\nLikely causes: "+(ak===0?"Loading "+S.movieURL+" may have failed (and/or Flash "+S.flashVersion+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(S.debugFlash?" "+L("checkSWF"):""),2);if(!ai&&ak){l("localFail",2);if(!S.debugFlash){l("tryDebug",2)}}if(ak===0){S._wD(L("swf404",S.url))}U("flashtojs",false,": Timed out"+(ai)?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!p&&x){if(ak===null){if(S.useFlashBlock||S.flashLoadTimeout===0){if(S.useFlashBlock){Q()}l("waitForever")}else{z(true)}}else{if(S.flashLoadTimeout===0){l("waitForever")}else{z(true)}}}},S.flashLoadTimeout)};X=function(){var ak=[];if(S.debugMode){ak.push(S.swfCSS.sm2Debug)}if(S.debugFlash){ak.push(S.swfCSS.flashDebug)}if(S.useHighPerformance){ak.push(S.swfCSS.highPerf)}return ak.join(" ")};Q=function(){var ak="soundManager::flashBlockHandler()",al=S.getMoviePercent();if(!S.supported()){S.oMC.className=X()+" "+S.swfCSS.swfDefault+" "+(al===null?S.swfCSS.swfTimedout:S.swfCSS.swfError);S._wD(ak+": "+L("fbTimeout")+(al?" ("+L("fbLoaded")+")":""));G(true);if(S.onerror instanceof Function){S.onerror.apply(c)}S.didFlashBlock=true}else{if(S.didFlashBlock){S._wD(ak+": Unblocked")}S.oMC.className=X()+" "+S.swfCSS.swfDefault+(" "+S.swfCSS.swfUnblocked)}};y=function(){if(C||!aa){return true}x=true;C=true;S._wD("soundManager::handleFocus()");if(aa){c.removeEventListener("mousemove",y,false)}Y=false;setTimeout(i,500);if(c.removeEventListener){c.removeEventListener("focus",y,false)}else{if(c.detachEvent){c.detachEvent("onfocus",y)}}};r=function(al){if(p){return false}var am=S.oMC.className,ak=(S.useFlashBlock&&S.flashLoadTimeout&&!S.getMoviePercent());if(!ak){p=true}S._wD("-- SoundManager 2 "+(j?"failed to load":"loaded")+" ("+(j?"security/load error":"OK")+") --",1);if(j||al){if(S.useFlashBlock){S.oMC.className=X()+" "+(S.getMoviePercent()===null?S.swfCSS.swfTimedout:S.swfCSS.swfError)}G();U("onload",false);if(S.onerror instanceof Function){S.onerror.apply(c)}return false}else{U("onload",true)}if(S.waitForWindowLoad&&!h){l("waitOnload");if(c.addEventListener){c.addEventListener("load",s,false)}else{if(c.attachEvent){c.attachEvent("onload",s)}}return false}else{if(S.waitForWindowLoad&&h){l("docLoaded")}s()}};ae=function(al,ak){K.push({method:al,scope:(ak||null),fired:false})};G=function(ap){if(!p&&!ap){return false}var al={success:(ap?S.supported():!j)},ak=[],ao,an,am=(!S.useFlashBlock||(S.useFlashBlock&&!S.supported()));for(ao=0,an=K.length;ao<an;ao++){if(K[ao].fired!==true){ak.push(K[ao])}}if(ak.length){S._wD(w+": Firing "+ak.length+" onready() item"+(ak.length>1?"s":""));for(ao=0,an=ak.length;ao<an;ao++){if(ak[ao].scope){ak[ao].method.apply(ak[ao].scope,[al])}else{ak[ao].method(al)}if(!am){ak[ao].fired=true}}}};s=function(){c.setTimeout(function(){if(S.useFlashBlock){Q()}G();l("onload",1);S.onload.apply(c);l("onloadOK",1)})};ad=function(){l("init");P();if(p){l("didInit");return false}if(c.removeEventListener){c.removeEventListener("load",S.beginDelayedInit,false)}else{if(c.detachEvent){c.detachEvent("onload",S.beginDelayedInit)}}try{l("flashJS");S.o._externalInterfaceTest(false);if(!S.allowPolling){l("noPolling",1)}else{I(true,S.useFastPolling?true:false)}if(!S.debugMode){S.o._disableDebug()}S.enabled=true;U("jstoflash",true)}catch(ak){S._wD("js/flash exception: "+ak.toString());U("jstoflash",false);z(true);r();return false}r()};A=function(){if(W){return false}M();P();W=true;return true};N=function(){if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",N,false)}n()};V=function(){var al,ak=0,am=null;for(al=S.soundIDs.length;al--;){am=S.sounds[S.soundIDs[al]];ak+=(am._onTimer()===true?1:0)}if(!ak){S._wD("Stopping HTML 5 interval");c.clearInterval(v);v=null}};ab=function(ak){if(!ak._hasTimer){ak._hasTimer=true}if(!v){S._wD("Starting HTML 5 interval");v=c.setInterval(V,S.useFastPolling?33:100)}};o=function(ak){if(ak._hasTimer){ak._hasTimer=false}};this._setSandboxType=function(ak){var al=S.sandbox;al.type=ak;al.description=al.types[(typeof al.types[ak]!=="undefined"?ak:"unknown")];S._wD("Flash security sandbox type: "+al.type);if(al.type==="localWithFile"){al.noRemote=true;al.noLocal=false;l("secNote",2)}else{if(al.type==="localWithNetwork"){al.noRemote=false;al.noLocal=true}else{if(al.type==="localTrusted"){al.noRemote=false;al.noLocal=false}}}};this._externalInterfaceOK=function(ak){if(S.swfLoaded){return false}var al=new Date().getTime();S._wD("soundManager::externalInterfaceOK()"+(ak?" (~"+(al-ak)+" ms)":""));U("swf",true);U("flashtojs",true);S.swfLoaded=true;aa=false;if(S.isIE){setTimeout(ad,100)}else{ad()}};this._onfullscreenchange=function(ak){S._wD("onfullscreenchange(): "+ak);S.isFullScreen=(ak===1?true:false);if(!S.isFullScreen){try{c.focus();S._wD("window.focus()")}catch(al){}}};u=function(al){var ao=this,ap,am,an,ak;this.sID=al.id;this.url=al.url;this.options=F(al);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this._lastURL=null;this.useHTML5=S.enableHTML5Audio;this.id3={};this._debug=function(){if(S.debugMode){var at=null,av=[],ar,au,aq=64;for(at in ao.options){if(ao.options[at]!==null){if(ao.options[at] instanceof Function){ar=ao.options[at].toString();ar=ar.replace(/\s\s+/g," ");au=ar.indexOf("{");av.push(" "+at+": {"+ar.substr(au+1,(Math.min(Math.max(ar.indexOf("\n")-1,aq),aq))).replace(/\n/g,"")+"... }")}else{av.push(" "+at+": "+ao.options[at])}}}S._wD("SMSound() merged options: {\n"+av.join(", \n")+"\n}")}};this._debug();this.load=function(aq){var ar=null;if(typeof aq!=="undefined"){ao._iO=F(aq);ao.instanceOptions=ao._iO}else{aq=ao.options;ao._iO=aq;ao.instanceOptions=ao._iO;if(ao._lastURL&&ao._lastURL!==ao.url){l("manURL");ao._iO.url=ao.url;ao.url=null}}if(typeof ao._iO.url==="undefined"){ao._iO.url=ao.url}S._wD("soundManager.load(): "+ao._iO.url,1);if(ao._iO.url===ao.url&&ao.readyState!==0&&ao.readyState!==2){l("onURL",1);return false}ao.url=ao._iO.url;ao._lastURL=ao._iO.url;ao.loaded=false;ao.readyState=1;ao.playState=0;ao._iO=aj(ao._iO);try{if(ao.useHTML5){S._wD("HTML 5 load: "+ao._iO.url);ar=ao._setup_html5({url:ao._iO.url});ar.load();if(ao._iO.autoPlay){ao.play()}}else{if(S.flashVersion===8){S.o._load(ao.sID,ao._iO.url,ao._iO.stream,ao._iO.autoPlay,(ao._iO.whileloading?1:0),ao._iO.loops||1)}else{S.o._load(ao.sID,ao._iO.url,ao._iO.stream?true:false,ao._iO.autoPlay?true:false,ao._iO.loops||1);if(ao._iO.isMovieStar&&ao._iO.autoLoad&&!ao._iO.autoPlay){ao.pause()}}}}catch(at){l("smError",2);U("onload",false);S.onerror();S.disable()}};this.unload=function(){if(ao.readyState!==0){S._wD('SMSound.unload(): "'+ao.sID+'"');if(ao.readyState!==2){ao.setPosition(0,true)}if(!ao.useHTML5){S.o._unload(ao.sID,S.nullURL)}else{an();if(ao.__element){ao.__element.pause();ao.__element=null}}ap()}};this.destruct=function(){S._wD('SMSound.destruct(): "'+ao.sID+'"');if(!ao.useHTML5){S.o._destroySound(ao.sID)}else{an();if(ao.__element){ao.__element.pause();ao.__element=null;ao._added_events=false}}S.destroySound(ao.sID,true)};this.play=function(ar){var at="SMSound.play(): ",aq;if(!ar){ar={}}ao._iO=F(ar,ao._iO);ao._iO=F(ao._iO,ao.options);ao.instanceOptions=ao._iO;if(ao.useHTML5){ao._setup_html5({url:ao._iO.url});ak()}if(ao.playState===1){aq=ao._iO.multiShot;if(!aq){S._wD(at+'"'+ao.sID+'" already playing (one-shot)',1);return false}else{S._wD(at+'"'+ao.sID+'" already playing (multi-shot)',1);if(ao.useHTML5){ao.setPosition(ao._iO.position)}}}if(!ao.loaded){if(ao.readyState===0){S._wD(at+'Attempting to load "'+ao.sID+'"',1);ao._iO.autoPlay=true;ao.load(ao._iO)}else{if(ao.readyState===2){S._wD(at+'Could not load "'+ao.sID+'" - exiting',2);return false}else{S._wD(at+'"'+ao.sID+'" is loading - attempting to play..',1)}}}else{S._wD(at+'"'+ao.sID+'"')}if(ao.paused){S._wD(at+'"'+ao.sID+'" is resuming from paused state',1);ao.resume()}else{if(ao.useHTML5&&ao.playState===1){S._wD("TODO: WARNING: Double-play case? playState = 1");return true}S._wD(at+'"'+ao.sID+'" is starting to play');ao.playState=1;if(!ao.instanceCount||(S.flashVersion>8&&!ao.useHTML5)){ao.instanceCount++}ao.position=(typeof ao._iO.position!=="undefined"&&!isNaN(ao._iO.position)?ao._iO.position:0);ao._iO=aj(ao._iO);if(ao._iO.onplay){ao._iO.onplay.apply(ao)}ao.setVolume(ao._iO.volume,true);ao.setPan(ao._iO.pan,true);if(!ao.useHTML5){S.o._start(ao.sID,ao._iO.loop||1,(S.flashVersion===9?ao.position:ao.position/1000))}else{ak();ao._setup_html5().play()}}};this.start=this.play;this.stop=function(aq){if(ao.playState===1){ao.playState=0;ao.paused=false;if(ao._iO.onstop){ao._iO.onstop.apply(ao)}if(!ao.useHTML5){S.o._stop(ao.sID,aq)}else{if(ao.__element){ao.__element.pause();ao.setPosition(0);V();an()}}ao.instanceCount=0;ao._iO={}}};this.setPosition=function(ar,aq){if(typeof ar==="undefined"){ar=0}var at=Math.min(ao.duration,Math.max(ar,0));ao._iO.position=at;if(!aq){}if(!ao.useHTML5){S.o._setPosition(ao.sID,(S.flashVersion===9?ao._iO.position:ao._iO.position/1000),(ao.paused||!ao.playState))}else{if(ao.__element){if(ao.playState){ao.__element.currentTime=ao._iO.position/1000}else{S._wD("HTML 5 warning: cannot set position while playState == 0 (not playing)",2)}if(ao.paused){V(true)}}}};this.pause=function(){if(ao.paused||ao.playState===0){return false}S._wD("SMSound.pause()");ao.paused=true;if(!ao.useHTML5){S.o._pause(ao.sID)}else{ao._setup_html5().pause();an()}if(ao._iO.onpause){ao._iO.onpause.apply(ao)}};this.resume=function(){if(!ao.paused||ao.playState===0){return false}S._wD("SMSound.resume()");ao.paused=false;if(!ao.useHTML5){S.o._pause(ao.sID)}else{ao._setup_html5().play();ak()}if(ao._iO.onresume){ao._iO.onresume.apply(ao)}};this.togglePause=function(){S._wD("SMSound.togglePause()");if(ao.playState===0){ao.play({position:(S.flashVersion===9&&!ao.useHTML5?ao.position:ao.position/1000)});return false}if(ao.paused){ao.resume()}else{ao.pause()}};this.setPan=function(ar,aq){if(typeof ar==="undefined"){ar=0}if(typeof aq==="undefined"){aq=false}if(!ao.useHTML5){S.o._setPan(ao.sID,ar)}else{}ao._iO.pan=ar;if(!aq){ao.pan=ar}};this.setVolume=function(aq,ar){if(typeof aq==="undefined"){aq=100}if(typeof ar==="undefined"){ar=false}if(!ao.useHTML5){S.o._setVolume(ao.sID,(S.muted&&!ao.muted)||ao.muted?0:aq)}else{if(ao.__element){ao.__element.volume=ao.muted?0:(aq/100)}}ao._iO.volume=aq;if(!ar){ao.volume=aq}};this.mute=function(){ao.muted=true;if(!ao.useHTML5){S.o._setVolume(ao.sID,0)}else{ao.setVolume(0,false)}};this.unmute=function(){ao.muted=false;var aq=typeof ao._iO.volume!=="undefined";if(!ao.useHTML5){S.o._setVolume(ao.sID,aq?ao._iO.volume:ao.options.volume)}else{ao.setVolume((aq?ao._iO.volume:ao.options.volume))}};this.toggleMute=function(){if(ao.muted){ao.unmute()}else{ao.mute()}};this._onTimer=function(aq){if(ao._hasTimer||aq){var ar;if(ao.__element&&(aq||((ao.playState>0||ao.readyState===1)&&!ao.paused))){ao.duration=((ao.__element.duration*1000)||null);ao.durationEstimate=ao.duration;ar=((ao.__element.currentTime?ao.__element.currentTime*1000:0)||(ao.__element.buffered&&ao.__element.buffered.length?ao.__element.buffered.end(0):0));ao._whileplaying(ar,{},{},{},{});return true}else{S._wD('_onTimer: Warn for "'+ao.sID+'": '+(!ao.__element?"Could not find element. ":"")+(ao.playState===0?"playState bad, 0?":"playState = "+ao.playState+", OK"));return false}}};ak=function(){if(ao.useHTML5){ab(ao)}};an=function(){if(ao.useHTML5){o(ao)}};ap=function(aq){ao._hasTimer=null;ao._added_events=null;ao.__element=null;ao.bytesLoaded=null;ao.bytesTotal=null;ao.position=null;ao.duration=null;ao.durationEstimate=null;ao.loaded=false;ao.playState=0;ao.paused=false;ao.readyState=0;ao.muted=false;ao.didBeforeFinish=false;ao.didJustBeforeFinish=false;ao.isBuffering=false;ao.instanceOptions={};ao.instanceCount=0;ao.peakData={left:0,right:0};ao.waveformData={left:[],right:[]};ao.eqData=[];ao.eqData.left=[];ao.eqData.right=[]};ap();this._setup_html5=function(ar){if(ao.__element){return ao.__element}var aq=F(ao._iO,ar);S._wD("creating HTML 5 audio element with URL: "+aq.url);ao.__element=new Audio(aq.url);am();return ao.__element};am=function(){if(ao._added_events){return false}ao._added_events=true;S._wD("_add_html5_events()");ao.__element.addEventListener("load",function(aq){S._wD("HTML5::load: "+ao.sID);if(ao.__element){ao._whileloading(ao.bytesTotal,ao.bytesTotal,((ao.__element.duration*1000)||undefined));ao._onload(1)}},false);ao.__element.addEventListener("progress",function(aq){S._wD("HTML5::progress: "+ao.sID);if(!ao.loaded&&ao.__element){ao._whileloading(aq.loaded||0,aq.total||1,((ao.__element.duration*1000)||undefined))}},false);ao.__element.addEventListener("end",function(aq){S._wD("HTML5::end: "+ao.sID);ao._onfinish()},false);ao.__element.addEventListener("error",function(aq){S._wD("HTML5::error: "+ao.__element.error)},false);ao.__element.addEventListener("empty",function(aq){S._wD("HTML5::empty")},false);ao.__element.addEventListener("loadstart",function(aq){ao._onbufferchange(1)},false);ao.__element.addEventListener("play",function(aq){ao._onbufferchange(0)},false);setTimeout(function(){if(ao&&ao.__element){ao.__element.addEventListener("ended",function(aq){S._wD("HTML5::ended: "+ao.sID);ao._onfinish()},false)}},250);S._wD("_add_html5_events(): OK")};this._whileloading=function(aq,ar,at){if(!ao._iO.isMovieStar){ao.bytesLoaded=aq;ao.bytesTotal=ar;ao.duration=Math.floor(at);ao.durationEstimate=parseInt((ao.bytesTotal/ao.bytesLoaded)*ao.duration,10);if(ao.durationEstimate===undefined){ao.durationEstimate=ao.duration}if(ao.readyState!==3&&ao._iO.whileloading){ao._iO.whileloading.apply(ao)}}else{ao.bytesLoaded=aq;ao.bytesTotal=ar;ao.duration=Math.floor(at);ao.durationEstimate=ao.duration;if(ao.readyState!==3&&ao._iO.whileloading){ao._iO.whileloading.apply(ao)}}};this._onid3=function(au,aq){S._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var av=[],at,ar;for(at=0,ar=au.length;at<ar;at++){av[au[at]]=aq[at]}ao.id3=F(ao.id3,av);if(ao._iO.onid3){ao._iO.onid3.apply(ao)}};this._whileplaying=function(at,au,aw,ar,av){if(isNaN(at)||at===null){return false}if(ao.playState===0&&at>0){at=0}ao.position=at;if(S.flashVersion>8&&!ao.useHTML5){if(ao._iO.usePeakData&&typeof au!=="undefined"&&au){ao.peakData={left:au.leftPeak,right:au.rightPeak}}if(ao._iO.useWaveformData&&typeof aw!=="undefined"&&aw){ao.waveformData={left:aw.split(","),right:ar.split(",")}}if(ao._iO.useEQData){if(typeof av!=="undefined"&&av&&av.leftEQ){var aq=av.leftEQ.split(",");ao.eqData=aq;ao.eqData.left=aq;if(typeof av.rightEQ!=="undefined"&&av.rightEQ){ao.eqData.right=av.rightEQ.split(",")}}}}if(ao.playState===1){if(ao.isBuffering){ao._onbufferchange(0)}if(ao._iO.whileplaying){ao._iO.whileplaying.apply(ao)}if(ao.loaded&&ao._iO.onbeforefinish&&ao._iO.onbeforefinishtime&&!ao.didBeforeFinish&&ao.duration-ao.position<=ao._iO.onbeforefinishtime){S._wD("duration-position &lt;= onbeforefinishtime: "+ao.duration+" - "+ao.position+" &lt= "+ao._iO.onbeforefinishtime+" ("+(ao.duration-ao.position)+")");ao._onbeforefinish()}}};this._onload=function(ar){var aq="SMSound._onload(): ";ar=(ar===1?true:false);S._wD(aq+'"'+ao.sID+'"'+(ar?" loaded.":" failed to load? - "+ao.url),(ar?1:2));if(!ar&&!ao.useHTML5){if(S.sandbox.noRemote===true){S._wD(aq+L("noNet"),1)}if(S.sandbox.noLocal===true){S._wD(aq+L("noLocal"),1)}}ao.loaded=ar;ao.readyState=ar?3:2;if(ao._iO.onload){ao._iO.onload.apply(ao)}};this._onbeforefinish=function(){if(!ao.didBeforeFinish){ao.didBeforeFinish=true;if(ao._iO.onbeforefinish){S._wD('SMSound._onbeforefinish(): "'+ao.sID+'"');ao._iO.onbeforefinish.apply(ao)}}};this._onjustbeforefinish=function(aq){if(!ao.didJustBeforeFinish){ao.didJustBeforeFinish=true;if(ao._iO.onjustbeforefinish){S._wD('SMSound._onjustbeforefinish(): "'+ao.sID+'"');ao._iO.onjustbeforefinish.apply(ao)}}};this._onfinish=function(){if(ao._iO.onbeforefinishcomplete){ao._iO.onbeforefinishcomplete.apply(ao)}ao.didBeforeFinish=false;ao.didJustBeforeFinish=false;if(ao.instanceCount){ao.instanceCount--;if(!ao.instanceCount){ao.playState=0;ao.paused=false;ao.instanceCount=0;ao.instanceOptions={};an()}if(!ao.instanceCount||ao._iO.multiShotEvents){if(ao._iO.onfinish){S._wD('SMSound._onfinish(): "'+ao.sID+'"');ao._iO.onfinish.apply(ao)}}}else{if(ao.useVideo){}}};this._onmetadata=function(ar){var aq="SMSound.onmetadata()";S._wD(aq);if(!ar.width&&!ar.height){l("noWH");ar.width=320;ar.height=240}ao.metadata=ar;ao.width=ar.width;ao.height=ar.height;if(ao._iO.onmetadata){S._wD(aq+': "'+ao.sID+'"');ao._iO.onmetadata.apply(ao)}S._wD(aq+" complete")};this._onbufferchange=function(ar){var aq="SMSound._onbufferchange()";if(ao.playState===0){return false}if(ar===ao.isBuffering){S._wD(aq+": ignoring false default / loaded sound");return false}ao.isBuffering=(ar===1?true:false);if(ao._iO.onbufferchange){S._wD(aq+": "+ar);ao._iO.onbufferchange.apply(ao)}};this._ondataerror=function(aq){if(ao.playState>0){S._wD("SMSound._ondataerror(): "+aq);if(ao._iO.ondataerror){ao._iO.ondataerror.apply(ao)}}else{}}};if(c.addEventListener){c.addEventListener("focus",y,false);c.addEventListener("load",S.beginDelayedInit,false);c.addEventListener("unload",S.destruct,false);if(aa){c.addEventListener("mousemove",y,false)}}else{if(c.attachEvent){c.attachEvent("onfocus",y);c.attachEvent("onload",S.beginDelayedInit);c.attachEvent("unload",S.destruct)}else{U("onload",false);b.onerror();b.disable()}}if(document.addEventListener){document.addEventListener("DOMContentLoaded",N,false)}}if(typeof SM2_DEFER==="undefined"||!SM2_DEFER){b=new a()}c.SoundManager=a;c.soundManager=b}(window));